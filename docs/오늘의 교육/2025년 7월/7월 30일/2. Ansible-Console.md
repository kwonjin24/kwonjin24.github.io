---
layout: default
title: 2. Ansible-Console
parent: 7월 30일
nav_order: 131
---

# 2025년 7월 30일 교육 내용

오늘 배운 내용을 여기에 정리합니다.

# Ansible Console은 Ansible 모듈을 실시간으로 실행해볼 수 있는 **대화형 셸(Interactive Shell)**입니다.

매번 ansible ... 명령어를 전부 입력할 필요 없이, 특정 서버나 그룹을 선택해 여러 작업을 연속으로 실행하고 그 결과를 바로 확인할 때 매우 유용합니다.

기본 사용법
ansible-console

이 명령어로 Ansible 대화형 셸을 시작합니다. 인벤토리 정보를 읽어오고 프롬프트가 뜹니다.

cd an-ksh004

셸 안에서 사용하는 cd 명령어입니다. "Change Directory"가 아니라 **"Change Host"**의 의미입니다.

이 명령어를 실행하면, 앞으로 입력하는 모든 작업의 대상이 an-ksh004 서버로 고정됩니다.


ansible-console

ksh001@ksh001:~/ansible-lab$ ansible-console

ansible-console

cd an-ksh004


추가적인 주요 명령어 예시
cd an-ksh004로 대상을 지정한 후, 아래와 같은 명령어들을 추가로 사용할 수 있습니다.

Bash

## 콘솔 시작 시 root 권한이 필요할 수 있으므로 -b (--become) 옵션을 추가하는 것이 좋습니다.
ksh001@ksh001:~/ansible-lab$ ansible-console -b

ksh001@all (5) [f:5]$ # 처음엔 모든 호스트(all)가 대상입니다.

## --- 1. 작업 대상 변경 ---
ksh001@all (5) [f:5]$ cd an-ksh004
ksh001@an-ksh004 (1) [f:5]$ # 이제 대상이 an-ksh004로 변경되었습니다.

## --- 2. 모듈 실행 (이제 모듈 이름만 입력하면 됩니다) ---
## 연결 테스트
ksh001@an-ksh004 (1) [f:5]$ ping

## OS 정보 확인
ksh001@an-ksh004 (1) [f:5]$ setup filter=ansible_distribution

## htop 패키지 설치
ksh001@an-ksh004 (1) [f:5]$ apt name=htop state=present

## nginx 서비스 상태 확인
ksh001@an-ksh004 (1) [f:5]$ service name=nginx state=started

## 현재 사용자 확인
ksh001@an-ksh004 (1) [f:5]$ shell whoami

## --- 3. 작업 대상 그룹으로 변경 및 확인 ---
ksh001@an-ksh004 (1) [f:5]$ cd webservers
ksh001@webservers (4) [f:5]$ # 이제 대상이 webservers 그룹 전체로 변경되었습니다.

## 그룹에 속한 호스트 목록 보기
ksh001@webservers (4) [f:5]$ list

## --- 4. 콘솔 종료 ---
ksh001@webservers (4) [f:5]$ exit

==================================================================

ansible-doc은 Ansible 모듈의 공식 사용 설명서를 터미널에서 바로 보여주는 명령어입니다.

웹사이트를 방문하지 않고도 모듈의 정확한 사용법, 파라미터, 예제 등을 빠르고 쉽게 확인할 수 있습니다.

주요 활용법
모듈의 정확한 이름과 역할이 궁금할 때

사용할 수 있는 파라미터(옵션)의 종류와 이름을 모를 때

어떤 파라미터가 필수인지 확인하고 싶을 때

실제 사용 예제 코드를 참고하고 싶을 때 (가장 유용)


ansible-doc

## copy 모듈의 설명서 보기
ansible-doc ansible.builtin.copy

## service 모듈의 간단한 예제 보기
ansible-doc -s ansible.builtin.service

-l 또는 --list 옵션을 사용하면 현재 설치된 모든 모듈의 목록과 간단한 설명을 볼 수 있습니다
ansible-doc -l