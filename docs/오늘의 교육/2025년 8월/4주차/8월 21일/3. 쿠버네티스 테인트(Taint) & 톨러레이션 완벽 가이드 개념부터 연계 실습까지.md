---
layout: default
title: μΏ λ²„λ„¤ν‹°μ¤ ν…μΈνΈ(Taint) & ν†¨λ¬λ μ΄μ… μ™„λ²½ κ°€μ΄λ“: κ°λ…λ¶€ν„° μ—°κ³„ μ‹¤μµκΉμ§€
parent: 8μ›” 21μΌ
nav_order: 4
---

# 2025λ…„ 8μ›” 20μΌ κµμ΅ λ‚΄μ©

# μΏ λ²„λ„¤ν‹°μ¤

π“ μΏ λ²„λ„¤ν‹°μ¤ ν…μΈνΈ(Taint)μ™€ ν†¨λ¬λ μ΄μ…(Toleration) μ™„λ²½ μ •λ¦¬
1. Taintμ™€ Tolerationμ΄λ€ λ¬΄μ—‡μΈκ°€?
ν…μΈνΈμ™€ ν†¨λ¬λ μ΄μ…μ€ νΉμ • λ…Έλ“(Node)μ— μ•„λ¬΄ Podλ‚ μ¤μΌ€μ¤„λ§λμ§€ μ•λ„λ΅ μ μ–΄ν•λ” λ©”μ»¤λ‹μ¦μ…λ‹λ‹¤. μ–΄ν”Όλ‹ν‹°(Affinity)κ°€ Podλ¥Ό νΉμ • λ…Έλ“λ΅ λμ–΄λ‹ΉκΈ°λ” **"μΈλ ¥(attraction)"**μ κ°λ…μ΄λΌλ©΄, ν…μΈνΈλ” λ°λ€λ΅ Podλ¥Ό λ°€μ–΄λ‚΄λ” **"μ²™λ ¥(repulsion)"**μ κ°λ…μ…λ‹λ‹¤.

    π‘‰ μ‰¬μ΄ λΉ„μ : "κ΄€κ³„μ μ™Έ μ¶μ…κΈμ§€" ν‘μ§€νκ³Ό "μ¶μ…μ¦"

    λ…Έλ“ (Node): νΉλ³„ν• μ¥λΉ„κ°€ μλ” μ¤‘μ”ν• μ„λ²„μ‹¤.

    ν…μΈνΈ (Taint): μ„λ²„μ‹¤ λ¬Έμ— λ¶™μ–΄μλ” "κ΄€κ³„μ μ™Έ μ¶μ…κΈμ§€" ν‘μ§€ν.

    ν†¨λ¬λ μ΄μ… (Toleration): νΉμ • Podκ°€ κ°€μ§€κ³  μλ” "μ¶μ…μ¦". μ΄ μ¶μ…μ¦μ΄ μμΌλ©΄ ν‘μ§€νμ„ λ¬΄μ‹ν•κ³  λ“¤μ–΄κ° μ μμµλ‹λ‹¤.

2. μ¤μΌ€μ¤„λ§ μ μ–΄ κΈ°λ¥ λΉ„κµ
| κΈ°λ¥ | μ μ© λ€μƒ | λ©μ  | κ°•μ /μ„ νΈ |
|---|---|---|---|
| NodeSelector | Pod | νΉμ • Node λΌλ²¨κ³Ό μ™„μ „ν μΌμΉν•λ” κ³³μ— λ°°ν¬ | κ°•μ  |
| Affinity | Pod | Node/Pod λΌλ²¨ κ·μΉ™μ— λ”°λΌ μ„ νΈν•λ” κ³³μ— λ°°ν¬ |	κ°•μ /μ„ νΈ | 
| Taint/Toleration | Node/Pod | νΉμ • Nodeμ— λ°°ν¬λλ” κ²ƒμ„ μ μ™Έ/ν—μ© | κ°•μ /μ„ νΈ (NoSchedule, PreferNoSchedule, NoExecute) | 

3. Taintμ 3κ°€μ§€ ν¨κ³Ό(Effect)
| Effect | μ„¤λ… | κΈ°μ΅΄μ— μ‹¤ν–‰ μ¤‘μΈ Podμ— λ―ΈμΉλ” μν–¥ |
|---|---|---|
| NoSchedule | "μƒλ΅μ΄ μ†λ‹μ€ λ°›μ§€ μ•κ² μµλ‹λ‹¤." Tolerationμ΄ μ—†λ” μƒλ΅μ΄ Podλ” μ΄ λ…Έλ“μ— μ¤μΌ€μ¤„λ§λ  μ μ—†μµλ‹λ‹¤. | μν–¥ μ—†μ. μ΄λ―Έ μ‹¤ν–‰ μ¤‘μ΄λ Podλ” κ·Έλ€λ΅ μ μ§€λ©λ‹λ‹¤. |
| PreferNoSchedule	| "κ°€κΈ‰μ μ΄λ©΄ λ‹¤λ¥Έ κ³³μΌλ΅ κ°€μ£Όμ„Έμ”." NoScheduleμ μ•½ν• λ²„μ „μ…λ‹λ‹¤. ν΄λ¬μ¤ν„°μ— λ‹¤λ¥Έ λ°°μΉν•  λ…Έλ“κ°€ μ •λ§ μ—†μ„ λ•λ§ Tolerationμ΄ μ—†λ” Podλ„ λ°›μ•„μ¤λ‹λ‹¤.	 | μν–¥ μ—†μ. |
| NoExecute	"μ¶μ…μ¦ μ—†λ” λ¶„μ€ μ§€κΈ λ‹Ήμ¥ λ‚κ°€μ£Όμ„Έμ”." μƒλ΅μ΄ Podμ μ¤μΌ€μ¤„λ§μ„ λ§‰μ„ λΏλ§ μ•„λ‹λΌ, @μ΄λ―Έ μ‹¤ν–‰ μ¤‘μΈ Pod μ¤‘μ—μ„ Tolerationμ΄ μ—†λ” Podλ¥Ό μ¦‰μ‹ ν‡΄κ±°(evict)**μ‹ν‚µλ‹λ‹¤. | 	Tolerationμ΄ μ—†μΌλ©΄ μ¦‰μ‹ ν‡΄κ±°λ¨. | 
    π’΅ ν•µμ‹¬ κ°λ…: ν—κ°€μ™€ μ§€μ •μ μ°¨μ΄
    ν†¨λ¬λ μ΄μ…μ€ νΉμ • λ…Έλ“μ— λ“¤μ–΄κ° μ μλ” **'ν—κ°€μ¦'**μΌ λΏ, κ·Έ λ…Έλ“λ΅ κ°€μ•Όλ§ ν•λ” **'μ§€μ •μ„ ν‹°μΌ“'**μ΄ μ•„λ‹™λ‹λ‹¤. μ¤μΌ€μ¤„λ¬λ” μ—¬μ „ν μμ› μƒν™© λ“± λ‹¤λ¥Έ μ”μ†λ¥Ό κ³ λ ¤ν•μ—¬ κ°€μ¥ μ ν•©ν• λ…Έλ“λ¥Ό μ„ νƒν•λ©°, μ—¬κΈ°μ—λ” ν…μΈνΈκ°€ μ—†λ” λ‹¤λ¥Έ λ…Έλ“λ„ ν¬ν•¨λ  μ μμµλ‹λ‹¤.

4. μ‹¤λ¬΄ μ‹λ‚λ¦¬μ¤ μμ‹
    1. GPU λ“± νΉμ ν•λ“μ›¨μ–΄ λ…Έλ“ λ…μ  μ‚¬μ©:
    GPUκ°€ μ¥μ°©λ λΉ„μ‹Ό λ…Έλ“μ— kubectl taint nodes gpu-node special=gpu:NoSchedule μ™€ κ°™μ΄ ν…μΈνΈλ¥Ό μ„¤μ •ν•©λ‹λ‹¤. μ΄λ ‡κ² ν•λ©΄, ν•΄λ‹Ή ν†¨λ¬λ μ΄μ…μ„ κ°€μ§„ λ¨Έμ‹ λ¬λ‹ Podλ§ μ΄ λ…Έλ“λ¥Ό μ‚¬μ©ν•  μ μκ² λμ–΄ μμ› λ‚­λΉ„λ¥Ό λ§‰μ„ μ μμµλ‹λ‹¤.

    2. Master λ…Έλ“ λ³΄νΈ:
    μΏ λ²„λ„¤ν‹°μ¤ μ»¨νΈλ΅¤ ν”λ μΈ(Master) λ…Έλ“μ—λ” κΈ°λ³Έμ μΌλ΅ ν…μΈνΈκ°€ μ„¤μ •λμ–΄ μμ–΄, μΌλ° μ• ν”λ¦¬μΌ€μ΄μ… Podλ“¤μ΄ μ¤μΌ€μ¤„λ§λλ” κ²ƒμ„ λ§‰μµλ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ Master λ…Έλ“μ μμ›μ„ ν΄λ¬μ¤ν„° κ΄€λ¦¬λΌλ” ν•µμ‹¬μ μΈ μ—­ν• μ—λ§ μ§‘μ¤‘ν•λ„λ΅ λ³΄μ¥ν•©λ‹λ‹¤.

    3. λ…Έλ“ μ μ§€λ³΄μ λ° μ•μ „ν• Pod μ΄λ™:
    νΉμ • λ…Έλ“λ¥Ό μ¬λ¶€ν…ν•κ±°λ‚ μ κ²€ν•κΈ° μ „μ— kubectl taint nodes node1 maintenance=true:NoExecute ν…μΈνΈλ¥Ό μ μ©ν•©λ‹λ‹¤. κ·Έλ¬λ©΄ ν•΄λ‹Ή λ…Έλ“μ—μ„ μ‹¤ν–‰ μ¤‘μ΄λ λ¨λ“  Podλ“¤μ΄ λ‹¤λ¥Έ λ…Έλ“λ΅ μ•μ „ν•κ² μ®κ²¨κ°€λ―€λ΅(ν‡΄κ±°), μ„λΉ„μ¤ μ¤‘λ‹¨ μ—†μ΄ μ μ§€λ³΄μ μ‘μ—…μ„ μ§„ν–‰ν•  μ μμµλ‹λ‹¤.

5. β οΈ μ£Όμμ‚¬ν•­
    μ¤μΌ€μ¤„λ§ μ‹¤ν¨ κ°€λ¥μ„±: NoSchedule ν…μΈνΈκ°€ μλ” λ…Έλ“λ§ λ‚¨μ•λ”λ° Podμ— ν•΄λ‹Ή ν†¨λ¬λ μ΄μ…μ΄ μ—†λ‹¤λ©΄, Podλ” μμ›μ΄ μμ–΄λ„ λ°°ν¬λμ§€ λ»ν•κ³  μμ›ν Pending μƒνƒμ— λ¨Έλ¬΄λ¥Ό μ μμµλ‹λ‹¤.

    Pod ν‡΄κ±°(Eviction) μ£Όμ: NoExecute ν…μΈνΈλ¥Ό μ‹¤ν–‰ μ¤‘μΈ λ…Έλ“μ— μ¶”κ°€ν•λ©΄, ν•΄λ‹Ή ν†¨λ¬λ μ΄μ…μ΄ μ—†λ” κΈ°μ΅΄ Podλ“¤μ€ μ¦‰μ‹ μΆ…λ£λκ³  λ‹¤λ¥Έ κ³³μΌλ΅ μ¬λ°°μΉλ©λ‹λ‹¤. μλ„μΉ μ•μ€ μ„λΉ„μ¤ μ¤‘λ‹¨μ„ μ λ°ν•  μ μμΌλ―€λ΅ μ‹ μ¤‘ν•κ² μ‚¬μ©ν•΄μ•Ό ν•©λ‹λ‹¤.

--------------------------------------------------------------------------

π€ ν…μΈνΈ(Taint)μ™€ ν†¨λ¬λ μ΄μ…(Toleration) μ—°κ³„ μ‹¤μµ (μµμΆ… μ™„μ„±λ³Έ)
π― μµμΆ… λ©ν‘: Taintλ¥Ό μ‚¬μ©ν•μ—¬ νΉμ • λ…Έλ“μ Pod λ°°μΉλ¥Ό μ μ–΄ν•κ³ , nodeSelectorμ™€μ κ΄€κ³„λ¥Ό μ΄ν•΄ν•λ©°, μµμΆ…μ μΌλ΅ Tolerationμ„ μ‚¬μ©ν•μ—¬ Taintκ°€ μ μ©λ λ…Έλ“μ— Podλ¥Ό μ„±κ³µμ μΌλ΅ λ°°ν¬ν•λ” μ „μ²΄ κ³Όμ •μ„ λ§μ¤ν„°ν•©λ‹λ‹¤.

π’΅ Taintμ 3κ°€μ§€ ν¨κ³Ό(Effect) μ”μ•½

Effect	μ„¤λ…	κΈ°μ΅΄μ— μ‹¤ν–‰ μ¤‘μΈ Podμ— λ―ΈμΉλ” μν–¥
NoSchedule	"μƒλ΅μ΄ μ†λ‹μ€ λ°›μ§€ μ•κ² μµλ‹λ‹¤." <br> Tolerationμ΄ μ—†λ” μƒλ΅μ΄ Podλ” μ΄ λ…Έλ“μ— μ¤μΌ€μ¤„λ§λ  μ μ—†μµλ‹λ‹¤.	μν–¥ μ—†μ. <br> μ΄λ―Έ μ‹¤ν–‰ μ¤‘μ΄λ Podλ” κ·Έλ€λ΅ μ μ§€λ©λ‹λ‹¤.
PreferNoSchedule	"κ°€κΈ‰μ μ΄λ©΄ λ‹¤λ¥Έ κ³³μΌλ΅ κ°€μ£Όμ„Έμ”." <br> NoScheduleμ μ•½ν• λ²„μ „μ…λ‹λ‹¤. ν΄λ¬μ¤ν„°μ— λ‹¤λ¥Έ λ°°μΉν•  λ…Έλ“κ°€ μ •λ§ μ—†μ„ λ•λ§ Tolerationμ΄ μ—†λ” Podλ„ λ°›μ•„μ¤λ‹λ‹¤.	μν–¥ μ—†μ.
NoExecute	"μ¶μ…μ¦ μ—†λ” λ¶„μ€ μ§€κΈ λ‹Ήμ¥ λ‚κ°€μ£Όμ„Έμ”." <br> μƒλ΅μ΄ Podμ μ¤μΌ€μ¤„λ§μ„ λ§‰μ„ λΏλ§ μ•„λ‹λΌ, **μ΄λ―Έ μ‹¤ν–‰ μ¤‘μΈ Pod μ¤‘μ—μ„ Tolerationμ΄ μ—†λ” Podλ¥Ό μ¦‰μ‹ ν‡΄κ±°(evict)**μ‹ν‚µλ‹λ‹¤.	Tolerationμ΄ μ—†μΌλ©΄ μ¦‰μ‹ ν‡΄κ±°λ¨.
μ‹¤μµ 1: Taint μ„¤μ • λ° λ°°ν¬ μ ν• ν™•μΈ
λ©ν‘: νΉμ • λ…Έλ“μ— **ν…μΈνΈ(Taint)**λ¥Ό μ μ©ν•μ—¬, ν†¨λ¬λ μ΄μ…(Toleration)μ΄ μ—†λ” Podλ” ν•΄λ‹Ή λ…Έλ“λ¥Ό ν”Όν•΄ λ‹¤λ¥Έ κ³³μ— λ°°ν¬λλ” κ²ƒμ„ ν™•μΈν•©λ‹λ‹¤.

1λ‹¨κ³„: μ¤€λΉ„ - νΉμ • λ…Έλ“μ— Taint μ„¤μ •ν•κΈ°
node1.labs.local λ…Έλ“μ— Podλ“¤μ΄ μ¤μΌ€μ¤„λ§λμ§€ μ•λ„λ΅ NoSchedule ν¨κ³Όμ ν…μΈνΈλ¥Ό μ μ©ν•©λ‹λ‹¤.

Bash

# node1μ— Taint μ μ©
$ kubectl taint nodes node1.labs.local special-node=true:NoSchedule

# Taintκ°€ μ¬λ°”λ¥΄κ² μ μ©λμ—λ”μ§€ ν™•μΈ
$ kubectl describe node node1.labs.local | grep Taints
2λ‹¨κ³„: Tolerationμ΄ μ—†λ” Deployment λ°°ν¬
Tolerationμ΄ μ—†λ” μΌλ°μ μΈ Nginx Deploymentλ¥Ό λ°°ν¬ν•©λ‹λ‹¤.

nginx-deploy.yaml νμΌμ„ μƒμ„±ν•κ³  μ μ©ν•©λ‹λ‹¤.

YAML

# nginx-deploy.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment-nginx
spec:
  replicas: 5
  selector:
    matchLabels:
      app: pod-nginx
  template:
    metadata:
      labels:
        app: pod-nginx
    spec:
      containers:
      - name: nginx
        image: nginx
Bash

$ kubectl apply -f nginx-deploy.yaml
$ kubectl get pods -o wide
β¨ ν•µμ‹¬ ν™•μΈ ν¬μΈνΈ: μƒμ„±λ Podλ“¤μ΄ ν…μΈνΈκ°€ μ„¤μ •λ node1.labs.localμ„ ν”Όν•΄μ„, λ‚λ¨Έμ§€ λ…Έλ“μ—λ§ λ¶„μ‚° λ°°ν¬λ κ²ƒμ„ ν™•μΈν•©λ‹λ‹¤.

μ‹¤μµ 2: Taintμ™€ nodeSelector μ¶©λ ν™•μΈ
λ©ν‘: nodeSelectorλ΅ Podλ¥Ό ν…μΈνΈκ°€ μ μ©λ node1μ— κ°•μ λ΅ λ°°ν¬ν•λ„λ΅ μ§€μ •ν–μ„ λ•, μ¤μΌ€μ¤„λ§μ΄ μ‹¤ν¨ν•μ—¬ Pending μƒνƒμ— λΉ μ§€λ” κ²ƒμ„ ν™•μΈν•©λ‹λ‹¤.

1λ‹¨κ³„: nodeSelectorκ°€ μ¶”κ°€λ Deployment λ°°ν¬
nginx-deploy-conflict.yaml νμΌμ„ μƒμ„±ν•κ³  μ μ©ν•©λ‹λ‹¤.

YAML

# nginx-deploy-conflict.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment-nginx-conflict
spec:
  replicas: 1
  selector:
    matchLabels:
      app: pod-nginx-conflict
  template:
    metadata:
      labels:
        app: pod-nginx-conflict
    spec:
      nodeSelector:
        kubernetes.io/hostname: node1.labs.local
      containers:
      - name: nginx
        image: nginx
Bash

$ kubectl apply -f nginx-deploy-conflict.yaml
$ kubectl get pods
β¨ ν•µμ‹¬ ν™•μΈ ν¬μΈνΈ: Podκ°€ Runningμ΄ μ•„λ‹ Pending μƒνƒμ— λ¨Έλ¬΄λ¥΄λ” κ²ƒμ„ ν™•μΈν•©λ‹λ‹¤.

2λ‹¨κ³„: Pending μ›μΈ λ¶„μ„
describe pod λ…λ Ήμ–΄λ΅ μ¤μΌ€μ¤„λ§ μ‹¤ν¨μ μ›μΈμ΄ ν…μΈνΈ λ•λ¬Έμ„μ„ μ§μ ‘ ν™•μΈν•©λ‹λ‹¤.

Bash

$ kubectl describe pod <pod-name>
Events μ„Ήμ…μ—μ„ "node(s) had taint ..., that the pod didn't tolerate" λ©”μ‹μ§€λ¥Ό ν†µν•΄ μ‹¤ν¨ μ›μΈμ„ λ…ν™•ν μ• μ μμµλ‹λ‹¤.

μ‹¤μµ 3: Toleration μ μ© λ° λ¬Έμ  ν•΄κ²°
λ©ν‘: Pending μƒνƒ λ¬Έμ λ¥Ό, Podμ— **ν†¨λ¬λ μ΄μ…(Toleration)**μ„ μ¶”κ°€ν•μ—¬ ν•΄κ²°ν•©λ‹λ‹¤.

1λ‹¨κ³„: Tolerationμ΄ ν¬ν•¨λ Deployment λ°°ν¬
node1μ— μ„¤μ •λ ν…μΈνΈλ¥Ό μ©μΈν•  μ μλ” tolerations μ„¤μ •μ„ Pod ν…ν”λ¦Ώμ— μ¶”κ°€ν•©λ‹λ‹¤.

nginx-deploy-toleration.yaml νμΌμ„ μƒμ„±ν•κ³  μ μ©ν•©λ‹λ‹¤.

YAML

# nginx-deploy-toleration.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: deployment-nginx-toleration
spec:
  replicas: 5
  selector:
    matchLabels:
      app: pod-nginx-toleration
  template:
    metadata:
      labels:
        app: pod-nginx-toleration
    spec:
      tolerations:
      - key: "special-node"
        operator: "Equal"
        value: "true"
        effect: "NoSchedule"
      containers:
      - name: nginx
        image: nginx
Bash

$ kubectl apply -f nginx-deploy-toleration.yaml
$ kubectl get pods -o wide
β¨ ν•µμ‹¬ ν™•μΈ ν¬μΈνΈ: μ΄μ  Podλ“¤μ΄ "μ¶μ…μ¦"μ„ κ°€μ΅κΈ° λ•λ¬Έμ—, ν…μΈνΈκ°€ μ„¤μ •λ node1.labs.localμ—λ„ μ •μƒμ μΌλ΅ λ°°ν¬λλ” κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

π“ Taintμ™€ Toleration κ΄€κ³„ λ° μ‹¤μµ μ”μ•½
**ν…μΈνΈ(Taint)**λ” λ…Έλ“μ— "μ΄λ° Podλ” λ°›μ§€ μ•κ² λ‹¤"λ” κ·μΉ™μ„ λ¶€μ—¬ν•λ” κ²ƒμ΄κ³ , **ν†¨λ¬λ μ΄μ…(Toleration)**μ€ Podμ— "λ‚λ” κ·Έλ° κ·μΉ™μ„ κ°€μ§„ λ…Έλ“λΌλ„ λ“¤μ–΄κ° μ μλ‹¤"λ” ν—μ© μκ²©μ„ λ¶€μ—¬ν•λ” κ²ƒμ…λ‹λ‹¤. μ΄λ² μ—°κ³„ μ‹¤μµμ„ ν†µν•΄ μ°λ¦¬λ” λ‹¤μμ„ ν™•μΈν–μµλ‹λ‹¤.

Taintκ°€ μ„¤μ •λ λ…Έλ“λ” Toleration μ—†λ” Podμ λ°°μΉλ¥Ό κ±°λ¶€ν•©λ‹λ‹¤.

**nodeSelector**λ΅ Taintκ°€ μ„¤μ •λ λ…Έλ“λ¥Ό κ°•μ  μ§€μ •ν•λ©΄, Tolerationμ΄ μ—†λ” Podλ” Pending μƒνƒμ— λΉ μ§‘λ‹λ‹¤.

Podμ— Taintμ™€ μΌμΉν•λ” Tolerationμ„ λ¶€μ—¬ν•λ©΄, ν•΄λ‹Ή λ…Έλ“μ— μ •μƒμ μΌλ΅ λ°°ν¬λ  μ μμµλ‹λ‹¤.

μ΄λ¬ν• νΉμ„±μ„ ν™μ©ν•λ©΄ νΉμ • λ…Έλ“λ¥Ό μ „μ© λ©μ μΌλ΅ μμ•½ν•κ±°λ‚, λ…Έλ“ μ μ§€λ³΄μ μ‹ Podλ¥Ό μ•μ „ν•κ² μ΄λ™μ‹ν‚¤λ” λ“± μ •κµν• μ¤μΌ€μ¤„λ§ μ μ–΄κ°€ κ°€λ¥ν•΄μ§‘λ‹λ‹¤.

μ‹¤μµ λ§λ¬΄λ¦¬: μ „μ²΄ λ¦¬μ†μ¤ μ •λ¦¬
Bash

# λ¨λ“  Deployment μ‚­μ 
$ kubectl delete deployment --all

# node1μ Taint μ κ±°
$ kubectl taint nodes node1.labs.local special-node