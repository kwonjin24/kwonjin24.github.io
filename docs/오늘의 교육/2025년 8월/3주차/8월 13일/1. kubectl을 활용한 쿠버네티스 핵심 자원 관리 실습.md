---
layout: default
title: kubectlì„ í™œìš©í•œ ì¿ ë²„ë„¤í‹°ìŠ¤ í•µì‹¬ ìì› ê´€ë¦¬ ì‹¤ìŠµ
parent: 8ì›” 13ì¼
nav_order: 2
---

# 2025ë…„ 8ì›” 13ì¼ êµìœ¡ ë‚´ìš©

# ì¿ ë²„ë„¤í‹°ìŠ¤ 

ì¿ ë²„ë„¤í‹°ìŠ¤ ìì› ì •ë¦¬: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ì„œë¹„ìŠ¤
ë§ì”€í•˜ì‹  ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ í•µì‹¬ ê°œë…ë“¤ì„ ì •ë¦¬í•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤. ì´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•˜ê³  ì ‘ê·¼í•˜ëŠ” ê¸°ë³¸ ì ˆì°¨ì™€ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.

## 1) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (Namespace)
ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ ìì›ë“¤ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ê´€ë¦¬í•˜ëŠ” ê°€ìƒì˜ ê³µê°„ì…ë‹ˆë‹¤.

ì—­í• : ì—¬ëŸ¬ íŒ€ì´ë‚˜ í™˜ê²½(ê°œë°œ, ìš´ì˜)ì„ ë¶„ë¦¬í•˜ì—¬ ìì› ê°„ì˜ ì¶©ëŒì„ ë§‰ê³ , íš¨ìœ¨ì ì¸ ê¶Œí•œ ê´€ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

í™•ì¸ ë°©ë²•: kubectl get ns ëª…ë ¹ì–´ë¡œ í˜„ì¬ í´ëŸ¬ìŠ¤í„°ì— ì¡´ì¬í•˜ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ëª©ë¡ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 2) ì„œë¹„ìŠ¤ (Service)
ì„œë¹„ìŠ¤ëŠ” íŒŒë“œ(Pod)ì— ì•ˆì •ì ì¸ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ì œê³µí•˜ì—¬ ì™¸ë¶€ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í•µì‹¬ ìì›ì…ë‹ˆë‹¤. ì„œë¹„ìŠ¤ì˜ ì¢…ë¥˜ì— ë”°ë¼ ì ‘ê·¼ ë°©ì‹ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

ClusterIP (í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ ì ‘ì†)
ì—­í• : í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì—ë§Œ ìœ íš¨í•œ ê³ ì • IPë¥¼ í• ë‹¹í•©ë‹ˆë‹¤.

íŠ¹ì§•: í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ìœ¼ë©°, ì£¼ë¡œ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€ì˜ ë‹¤ë¥¸ íŒŒë“œë‚˜ ì„œë¹„ìŠ¤ ê°„ í†µì‹ ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

NodePort (í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ ì ‘ì†)
ì—­í• : ê° **ë…¸ë“œ(Node)**ì˜ íŠ¹ì • í¬íŠ¸ë¥¼ ì—´ì–´ ì™¸ë¶€ì— ì„œë¹„ìŠ¤ë¥¼ ë…¸ì¶œí•©ë‹ˆë‹¤.

íŠ¹ì§•: í´ëŸ¬ìŠ¤í„° ì™¸ë¶€ì—ì„œ ë…¸ë“œ_IP:ë…¸ì¶œëœ_í¬íŠ¸ ì£¼ì†Œë¥¼ í†µí•´ ì„œë¹„ìŠ¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

```
        > ë…¸ë“œ          |
í´ëŸ¬ìŠ¤í„°                | > íŒŒë“œ > ì»¨í…Œì´ë„ˆ
        > ë„¤ì„ìŠ¤í˜ì´ìŠ¤  |
```

ë…¸ë“œì™€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ì—­í• 
ë…¸ë“œ(Node): íŒŒë“œê°€ **ì–´ë””(ì–´ë–¤ ì„œë²„)**ì— ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤. ì´ëŠ” íŒŒë“œì˜ ë¬¼ë¦¬ì ì¸ ì‹¤í–‰ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. kubectl get pods -o wide ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ NODE ì»¬ëŸ¼ì—ì„œ íŒŒë“œê°€ ì‹¤í–‰ ì¤‘ì¸ ë…¸ë“œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Namespace): íŒŒë“œê°€ ì–´ë–¤ ê·¸ë£¹ì— ì†í•´ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ì…ë‹ˆë‹¤. ì´ëŠ” íŒŒë“œì˜ ë…¼ë¦¬ì ì¸ ì†Œì†ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. kubectl get pods --namespace <ë„¤ì„ìŠ¤í˜ì´ìŠ¤_ì´ë¦„> ëª…ë ¹ì–´ë¥¼ í†µí•´ íŠ¹ì • ê·¸ë£¹ì— ìˆëŠ” íŒŒë“œë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

----------------------------------------------------------------------------------------

ì ‘ê·¼ ì œì–´ ë°©ì‹ (Access Control Methods)
RBAC (Role-Based Access Control)
ì‚¬ìš©ìì—ê²Œ íŠ¹ì • ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ëŒ€ì‹ , **'ì—­í• (Role)'**ì— ê¶Œí•œì„ ì •ì˜í•˜ê³  ê·¸ ì—­í• ì„ ì‚¬ìš©ìì—ê²Œ í• ë‹¹í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 'ê°œë°œì' ì—­í• ì—ëŠ” íŒŒë“œ ìƒì„± ê¶Œí•œì„ ì£¼ê³ , 'ìš´ì˜ì' ì—­í• ì—ëŠ” ì „ì²´ í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ ê¶Œí•œì„ ì£¼ëŠ” ì‹ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ í‘œì¤€ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì ‘ê·¼ ì œì–´ ë°©ì‹ì…ë‹ˆë‹¤.

ACL (Access Control List)
íŠ¹ì • ìì›(íŒŒì¼, í´ë” ë“±)ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ìë‚˜ ê·¸ë£¹ì˜ ëª©ë¡ì„ ì§ì ‘ ì •ì˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. RBACê°€ 'ì—­í• 'ì„ ì¤‘ì‹¬ìœ¼ë¡œ í•œë‹¤ë©´, ACLì€ **'ìì›'**ì„ ì¤‘ì‹¬ìœ¼ë¡œ ëˆ„ê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í•˜ë‚˜ì”© ì§€ì •í•©ë‹ˆë‹¤.

ì¸ì¦ ë° ì‹ ì› í™•ì¸ (Authentication and Identity Verification)
ì¸ì¦ì„œ (Certificate)
ì‚¬ìš©ì, ì„œë²„, ë˜ëŠ” ì¥ì¹˜ì˜ ì‹ ì›ì„ ë³´ì¦í•˜ëŠ” ë””ì§€í„¸ íŒŒì¼ì…ë‹ˆë‹¤. í†µì‹  ì•”í˜¸í™”(HTTPS)ë‚˜ ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì ‘ì†ì„ ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.

DN (Distinguished Name)
ë””ì§€í„¸ ì¸ì¦ì„œì—ì„œ ì‚¬ìš©ë˜ëŠ” ê³ ìœ  ì‹ë³„ ì´ë¦„ì…ë‹ˆë‹¤. ì¸ì¦ì„œì˜ ì£¼ì²´(Subject)ë¥¼ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤. DNì€ ì—¬ëŸ¬ êµ¬ì„± ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤.

DC (Domain Component): ë„ë©”ì¸ ì´ë¦„ì˜ ê° êµ¬ì„± ìš”ì†Œ (ì˜ˆ: com, example, co.kr)

OU (Organizational Unit): ì¡°ì§ ë‚´ì˜ ë¶€ì„œë‚˜ ê·¸ë£¹ (ì˜ˆ: IT, HR, Engineering)

CN (Common Name): ì¸ì¦ì„œê°€ ì†í•œ ëŒ€ìƒì˜ ì´ë¦„ (ì˜ˆ: www.example.com ë˜ëŠ” John Doe)

----------------------------------------------------------------------------------------

# ë³¼ë£¸

## 1. ë¬¸ì œì : ì»¨í…Œì´ë„ˆëŠ” ì¼íšŒìš©ì…ë‹ˆë‹¤
ê°€ì¥ ë¨¼ì € ì•Œì•„ì•¼ í•  ê²ƒì€ **ì»¨í…Œì´ë„ˆëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì¼íšŒìš©(Ephemeral)**ì´ë¼ëŠ” ì‚¬ì‹¤ì…ë‹ˆë‹¤.

ì»¨í…Œì´ë„ˆëŠ” ë§ˆì¹˜ í¬ìŠ¤íŠ¸ì‡ê³¼ ê°™ìŠµë‹ˆë‹¤. ë¬´ì–¸ê°€ë¥¼ ì ì–´ë‘ì—ˆë‹¤ê°€ ë–¼ì–´ì„œ ë²„ë¦¬ë©´ ê·¸ ì•ˆì˜ ë‚´ìš©ì€ ì˜ì›íˆ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ, ì»¨í…Œì´ë„ˆ ì•ˆì— íŒŒì¼ì„ ì €ì¥í•´ ë‘ì–´ë„ ì»¨í…Œì´ë„ˆê°€ ì–´ë–¤ ì´ìœ ë¡œë“  ì¬ì‹œì‘ë˜ê±°ë‚˜ ì‚­ì œë˜ë©´ ê·¸ ì•ˆì˜ ë°ì´í„°ëŠ” ëª¨ë‘ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ì¤‘ìš”í•œ ì‚¬ìš©ì íŒŒì¼ì´ ì´ë ‡ê²Œ ì‚¬ë¼ì§„ë‹¤ë©´ í°ì¼ì´ê² ì£ .

## 2. í•´ê²°ì±…: ë³¼ë¥¨(Volume) - ì»¨í…Œì´ë„ˆì˜ ì™¸ì¥í•˜ë“œ
ì¿ ë²„ë„¤í‹°ìŠ¤ ë³¼ë¥¨ì€ ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ **'ì»¨í…Œì´ë„ˆì˜ ì™¸ì¥í•˜ë“œ'**ì™€ ê°™ìŠµë‹ˆë‹¤.

ë³¼ë¥¨ì€ íŒŒë“œ(Pod)ì— ì¥ì°©í•  ìˆ˜ ìˆëŠ” ì €ì¥ ê³µê°„ì…ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆê°€ í¬ìŠ¤íŠ¸ì‡ì´ë¼ë©´, ë³¼ë¥¨ì€ ë”°ë¡œ ë“¤ê³  ë‹¤ë‹ˆëŠ” USB ë©”ëª¨ë¦¬ë‚˜ ì™¸ì¥í•˜ë“œì…ë‹ˆë‹¤. í¬ìŠ¤íŠ¸ì‡ì„ ì°¢ì–´ ë²„ë ¤ë„ ì™¸ì¥í•˜ë“œì— ìˆëŠ” ë°ì´í„°ëŠ” ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì²˜ëŸ¼, ì»¨í…Œì´ë„ˆê°€ ì¬ì‹œì‘ë˜ì–´ë„ ë³¼ë¥¨ì— ì €ì¥ëœ ë°ì´í„°ëŠ” ì•ˆì „í•˜ê²Œ ë³´ì¡´ë©ë‹ˆë‹¤.

í•µì‹¬ íŠ¹ì§•:
ë³¼ë¥¨ì˜ ìƒëª…ì£¼ê¸°ëŠ” ì»¨í…Œì´ë„ˆê°€ ì•„ë‹Œ íŒŒë“œ(Pod)ì— ì—°ê²°ë©ë‹ˆë‹¤.
íŒŒë“œê°€ ì‚´ì•„ìˆëŠ” ë™ì•ˆì—ëŠ”, ê·¸ ì•ˆì˜ ì»¨í…Œì´ë„ˆê°€ ì¬ì‹œì‘ë˜ì–´ë„ ë³¼ë¥¨ ë°ì´í„°ëŠ” ìœ ì§€ë©ë‹ˆë‹¤.
í•˜ë‚˜ì˜ íŒŒë“œ ì•ˆì— ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆê°€ ìˆì„ ê²½ìš°, ì´ ì»¨í…Œì´ë„ˆë“¤ì€ ê°™ì€ ë³¼ë¥¨ì„ ê³µìœ í•˜ì—¬ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 3. ë³¼ë¥¨ì˜ ì¢…ë¥˜ì™€ ìš©ë„
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë³¼ë¥¨ì„ ì§€ì›í•˜ë©°, ìš©ë„ì— ë”°ë¼ ì„ íƒí•´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

emptyDir:
ê°œë…: íŒŒë“œê°€ ìƒì„±ë  ë•Œ í•¨ê»˜ ë§Œë“¤ì–´ì§€ëŠ” ì„ì‹œ í´ë”ì…ë‹ˆë‹¤. íŒŒë“œê°€ ì‚¬ë¼ì§€ë©´ ì´ í´ë”ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.

ë¹„ìœ : íšŒì˜ì‹¤(íŒŒë“œ) ì•ˆì— ìˆëŠ” í™”ì´íŠ¸ë³´ë“œ. íšŒì˜ì— ì°¸ì—¬í•œ ì—¬ëŸ¬ ì‚¬ëŒ(ì»¨í…Œì´ë„ˆ)ë“¤ì´ í•¨ê»˜ ì“°ê³  ì§€ìš¸ ìˆ˜ ìˆì§€ë§Œ, íšŒì˜ê°€ ëë‚˜ë©´(íŒŒë“œê°€ ì‚­ì œë˜ë©´) ë‚´ìš©ë„ ëª¨ë‘ ì§€ì›Œì§‘ë‹ˆë‹¤.

ìš©ë„: í•˜ë‚˜ì˜ íŒŒë“œ ë‚´ ì»¨í…Œì´ë„ˆ ê°„ì˜ ì„ì‹œ íŒŒì¼ ê³µìœ , ìºì‹œ ë°ì´í„° ì €ì¥ ë“±

hostPath:

ê°œë…: ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì¸ ë…¸ë“œ(ì„œë²„)ì˜ ì‹¤ì œ í´ë”ë¥¼ íŒŒë“œì— ì—°ê²°í•©ë‹ˆë‹¤.

ë¹„ìœ : ì•„íŒŒíŠ¸(ë…¸ë“œ)ì˜ íŠ¹ì • ë°©(í´ë”) ì—´ì‡ ë¥¼ ì»¨í…Œì´ë„ˆì—ê²Œ ì£¼ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤.

ìš©ë„: ë…¸ë“œì˜ ë¡œê·¸ íŒŒì¼ì„ ì½ê±°ë‚˜, ë„ì»¤ ì†Œì¼“ì— ì ‘ê·¼í•˜ëŠ” ë“± íŠ¹ìˆ˜í•œ ê²½ìš°ì— ì‚¬ìš©ë©ë‹ˆë‹¤.

âš ï¸ ì£¼ì˜: íŒŒë“œê°€ íŠ¹ì • ë…¸ë“œì— ë¬¶ì´ê²Œ ë˜ë¯€ë¡œ ê¼­ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì œí•œì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

awsElasticBlockStore, gcePersistentDisk, nfs (ë„¤íŠ¸ì›Œí¬ ë³¼ë¥¨):

ê°œë…: AWSì˜ EBS, Google Cloudì˜ Persistent Disk, ì‚¬ë‚´ íŒŒì¼ ì„œë²„(NFS) ê°™ì€ ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ ìŠ¤í† ë¦¬ì§€ë¥¼ íŒŒë“œì— ì§ì ‘ ì—°ê²°í•©ë‹ˆë‹¤.

ë¹„ìœ : íŒŒë“œë¥¼ ì™¸ë¶€ì˜ ì „ë¬¸ì ì¸ ë¬¼ë¥˜ ì°½ê³ ì— ì—°ê²°í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. íŒŒë“œë‚˜ ë…¸ë“œê°€ ì‚¬ë¼ì ¸ë„ ë°ì´í„°ëŠ” ì°½ê³ ì— ì•ˆì „í•˜ê²Œ ë³´ê´€ë©ë‹ˆë‹¤.

ìš©ë„: ë°ì´í„°ë² ì´ìŠ¤ íŒŒì¼, ì‚¬ìš©ì ì—…ë¡œë“œ íŒŒì¼ ë“± ì˜êµ¬ì ìœ¼ë¡œ ë³´ì¡´í•´ì•¼ í•  ì¤‘ìš”í•œ ë°ì´í„° ì €ì¥.

## 4. ê°€ì¥ ì¢‹ì€ ë°©ë²•: PVì™€ PVC
ìœ„ì˜ ë„¤íŠ¸ì›Œí¬ ë³¼ë¥¨ì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê²ƒì€, ê°œë°œìê°€ ì¸í”„ë¼(AWS ë³¼ë¥¨ ID ë“±) ì •ë³´ë¥¼ ì•Œì•„ì•¼ í•˜ë¯€ë¡œ ì¢‹ì€ ë°©ë²•ì´ ì•„ë‹™ë‹ˆë‹¤. ê·¸ë˜ì„œ ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” **PV(PersistentVolume)**ì™€ **PVC(PersistentVolumeClaim)**ë¼ëŠ” ë” ë°œì „ëœ ë°©ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ë ˆìŠ¤í† ë‘ì˜ ì™¸íˆ¬ ë³´ê´€ì†Œì— ë¹„ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê´€ë¦¬ì (ì¸í”„ë¼ ë‹´ë‹¹ì):  
ì™¸íˆ¬ ë³´ê´€ì†Œ ì§ì›ì²˜ëŸ¼, ë¯¸ë¦¬ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ì €ì¥ ê³µê°„(PV)ì„ ì¤€ë¹„í•´ ë‘¡ë‹ˆë‹¤. "ì´ê±´ 5GBì§œë¦¬ ë¹ ë¥¸ SSD", "ì €ê±´ 100GBì§œë¦¬ ëŠë¦° HDD"ì²˜ëŸ¼ ë§ì´ì£ .

ê°œë°œì (ì• í”Œë¦¬ì¼€ì´ì…˜ ë‹´ë‹¹ì):  
ë ˆìŠ¤í† ë‘ ì†ë‹˜ì²˜ëŸ¼, ë³´ê´€ì†Œì— ê°€ì„œ "ì œ ì™¸íˆ¬ë¥¼ ë§¡ê¸¸ ê³µê°„ í•˜ë‚˜ ì£¼ì„¸ìš”"ë¼ê³  **ìš”ì²­(PVC)í•©ë‹ˆë‹¤. "10GB ì •ë„ì˜ ë¹ ë¥¸ ê³µê°„ì´ í•„ìš”í•´ìš”" ë¼ê³ ë§Œ ë§í•˜ë©´ ë©ë‹ˆë‹¤.

ì¿ ë²„ë„¤í‹°ìŠ¤:  
ì†ë‹˜ì˜ ìš”ì²­(PVC)ì— ë§ëŠ” ì €ì¥ ê³µê°„(PV)ì„ ì°¾ì•„ì„œ ìë™ìœ¼ë¡œ ì—°ê²°í•´ì£¼ê³  'ë³´ê´€ì¦'ì„ ì¤ë‹ˆë‹¤. ê°œë°œìëŠ” ì´ 'ë³´ê´€ì¦'ë§Œ íŒŒë“œ ì„¤ì •ì— ë„£ìœ¼ë©´ ë©ë‹ˆë‹¤.

PV (PersistentVolume): ê´€ë¦¬ìê°€ ë¯¸ë¦¬ ì¤€ë¹„í•´ ë‘” ì‹¤ì œ ì €ì¥ ê³µê°„ (ì¶”ìƒí™”)

PVC (PersistentVolumeClaim): ê°œë°œìê°€ "ì´ë§Œí¼ì˜ ê³µê°„ì´ í•„ìš”í•´ìš”" ë¼ê³  í•˜ëŠ” ì €ì¥ ê³µê°„ ìš”ì²­ì„œ


----------------------------------------------------------------------------------------

## ğŸ“œ kubectl ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ì»¨í…ìŠ¤íŠ¸: ì¢…í•© ì‹¤ìŠµ ê°€ì´ë“œ
ì´ ê°€ì´ë“œëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ê²©ë¦¬í•˜ê³ , YAMLë¡œ ì„ ì–¸ì ìœ¼ë¡œ ê´€ë¦¬í•˜ë©°, ì»¨í…ìŠ¤íŠ¸ë¡œ ì‘ì—… íš¨ìœ¨ì„ ë†’ì´ëŠ” ì „ì²´ ê³¼ì •ì„ ìƒì„¸í•œ ì„¤ëª…ê³¼ ê²°ê³¼ ì˜ˆì‹œë¥¼ í¬í•¨í•˜ì—¬ ì§„í–‰í•©ë‹ˆë‹¤.

## 0. ì‚¬ì „ ì¤€ë¹„ (Prerequisites & Setup)
0.1) ì‹¤ìŠµ í™˜ê²½ ì •ë¦¬
ê¹¨ë—í•œ í™˜ê²½ì—ì„œ ì‹œì‘í•˜ê¸° ìœ„í•´ í˜„ì¬ ì„ íƒëœ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

âš ï¸ ì£¼ì˜: ì´ ëª…ë ¹ì–´ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìì²´ë¥¼ ì‚­ì œí•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.

Bash

kubectl delete all --all
0.2) Alias (ë‹¨ì¶•í‚¤) ì„¤ì • ë° í™•ì¸
kubectlì„ kë¡œ ì¤„ì—¬ì„œ ì‚¬ìš©í•˜ë©´ ì‹¤ìŠµì´ í›¨ì”¬ í¸ë¦¬í•´ì§‘ë‹ˆë‹¤.

Bash

# alias ì„¤ì •
alias k='kubectl'

# aliasê°€ ì˜ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
type k
ğŸ’¡ ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ
k is aliased to 'kubectl'

## 1. ë„¤ì„ìŠ¤í˜ì´ìŠ¤(Namespace) ìƒì„± ë° ë¦¬ì†ŒìŠ¤ ê²©ë¦¬
1.1) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ 3ê°œ ìƒì„± ë° í™•ì¸
ns1, ns2, ns3 ì„¸ ê°œì˜ ë…ë¦½ëœ ì‘ì—… ê³µê°„(í´ë”)ì„ ë§Œë“­ë‹ˆë‹¤.

Bash

k create namespace ns1
k create namespace ns2
k create namespace ns3

# í˜„ì¬ í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ëª©ë¡ í™•ì¸
k get namespace
ğŸ’¡ ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ

NAME              STATUS   AGE
default           Active   1d
kube-node-lease   Active   1d
kube-public       Active   1d
kube-system       Active   1d
ns1               Active   1s
ns2               Active   1s
ns3               Active   1s

1.2) ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë¦¬ì†ŒìŠ¤ ë°˜ë³µ ë°°í¬
ë™ì¼í•œ ì´ë¦„(ui)ì˜ ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ê° ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìƒì„±í•˜ì—¬ ì„œë¡œ ì™„ë²½í•˜ê²Œ ê²©ë¦¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.

Bash

k create deployment ui --image=nginx -n ns1
k create deployment ui --image=nginx -n ns2
k create deployment ui --image=nginx -n ns3

1.3) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë³„ ë°°í¬ ìƒíƒœ í™•ì¸
ê° "í´ë”" ì•ˆì— íŒŒë“œë“¤ì´ ì˜ ìƒì„±ë˜ì—ˆëŠ”ì§€ -n ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë”°ë¡œë”°ë¡œ í™•ì¸í•©ë‹ˆë‹¤.

Bash

k get deployment,pods -n ns1
ğŸ’¡ ì‹¤í–‰ ê²°ê³¼ ì˜ˆì‹œ (ns1)

NAME                   READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/ui   1/1     1            1           10s
NAME                        READY   STATUS    RESTARTS   AGE
pod/ui-6856f59f7d-abcde   1/1     Running   0          10s

## 2. YAML íŒŒì¼ì„ í™œìš©í•œ ì„ ì–¸ì  ê´€ë¦¬
ğŸ’¡ Tip: create vs apply

create: "ì´ ë¦¬ì†Œë“œë¥¼ ìƒì„±í•´". ì´ë¯¸ ì¡´ì¬í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

apply: "ì´ íŒŒì¼ê³¼ ìƒíƒœë¥¼ ë˜‘ê°™ì´ ë§ì¶°". ì—†ìœ¼ë©´ ìƒì„±í•˜ê³ , ë³€ê²½ëœ ë¶€ë¶„ì´ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. applyë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ê¶Œì¥ë©ë‹ˆë‹¤.

2.1) YAML íŒŒì¼ ì´ˆì•ˆ ë¹ ë¥´ê²Œ ë§Œë“¤ê¸° (--dry-run)
ë¦¬ì†ŒìŠ¤ë¥¼ ì‹¤ì œë¡œ ë§Œë“¤ì§€ ì•Šê³  YAML ë‚´ìš©ë§Œ íŒŒì¼ë¡œ ì €ì¥í•˜ëŠ” ë§¤ìš° ìœ ìš©í•œ ë°©ë²•ì…ë‹ˆë‹¤.

Bash

k run web1 --image=nginx:1.14 --dry-run=client -o yaml > web1.yml
âš ï¸ ì£¼ì˜: --dry-run=clientëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œë§Œ ì‹¤í–‰í•˜ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤. ë§Œì•½ --dry-run=serverë¥¼ ì‚¬ìš©í•˜ë©´, API ì„œë²„ê°€ ì‹¤ì œë¡œ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ”ì§€ ê²€ì¦ê¹Œì§€ í•˜ì§€ë§Œ, ì´ ì˜µì…˜ì€ ê³§ ì§€ì› ì¤‘ë‹¨(deprecated)ë  ì˜ˆì •ì…ë‹ˆë‹¤.

2.2) YAML íŒŒì¼ ìˆ˜ì • ë° ì ìš©
YAML íŒŒì¼ ì•ˆì— namespaceì™€ ì—¬ëŸ¬ ê°œì˜ portsë¥¼ ì§ì ‘ ì§€ì •í•˜ì—¬ ë” ëª…í™•í•˜ê²Œ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Bash
```
# ì•„ë˜ ë‚´ìš©ìœ¼ë¡œ nginx-pod.yml íŒŒì¼ ìƒì„±
vi nginx-pod.yml
YAML

# nginx-pod.yml íŒŒì¼ ë‚´ìš©
apiVersion: v1
kind: Pod
metadata:
  name: web-nginx
  namespace: ns1      # <-- ns1 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ìƒì„±í•˜ë„ë¡ ì§€ì •
spec:
  containers:
    - name: nginx
      image: nginx:1.14
      ports:
        - containerPort: 80   # <-- HTTP í¬íŠ¸
        - containerPort: 443  # <-- HTTPS í¬íŠ¸
```

Bash
```
# ìœ„ íŒŒì¼ ì ìš© í›„ ns1 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ í™•ì¸
k apply -f nginx-pod.yml
k get pods -n ns1
```

## 3. ì»¨í…ìŠ¤íŠ¸(Context)ë¡œ ì‘ì—… íš¨ìœ¨ ê·¹ëŒ€í™”
3.1) í˜„ì¬ ì„¤ì • í™•ì¸

Bash
```
k config view
k config current-context
```
3.2) ìƒˆë¡œìš´ ì»¨í…ìŠ¤íŠ¸ ìƒì„± ë° ì „í™˜
ns1ì„ ê¸°ë³¸ ì‘ì—… ê³µê°„ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ns1-contextë¥¼ ë§Œë“¤ê³  ì „í™˜í•©ë‹ˆë‹¤.

Bash
```
k config set-context ns1-context --cluster=kubernetes --user=kubernetes-admin --namespace=ns1
k config use-context ns1-context
```
3.3) ìƒˆ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì‘ì—…í•˜ê¸°
ì´ì œ -n ì˜µì…˜ ì—†ì´ë„ ëª¨ë“  k ëª…ë ¹ì–´ëŠ” ns1ì„ ëŒ€ìƒìœ¼ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

Bash
```
# í˜„ì¬ ì»¨í…ìŠ¤íŠ¸ê°€ 'ns1-context'ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸
k config current-context

# --namespace ì˜µì…˜ ì—†ì´ë„ ns1ì˜ íŒŒë“œê°€ ë³´ì„
k get pods
```

3.4) ì»¨í…ìŠ¤íŠ¸ ì´ë¦„ ë³€ê²½

Bash
```
k config rename-context ns1-context ns1-dev
## 4. ì •ë¦¬ ë° íŠ¹ì´ ì¼€ì´ìŠ¤ í™•ì¸
```

4.1) ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ
ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚­ì œí•˜ë©´ ê·¸ ì•ˆì˜ ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.

âš ï¸ ì£¼ì˜: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ ëª…ë ¹ í›„, ë‚´ë¶€ ë¦¬ì†ŒìŠ¤ê°€ ì •ë¦¬ë  ë•Œê¹Œì§€ Terminating ìƒíƒœë¡œ ëª‡ ë¶„ê°„ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Bash
```
k delete namespace ns1 ns2 ns3
```

4.2) "ê³ ì•„"ê°€ ëœ ì»¨í…ìŠ¤íŠ¸ ì˜¤ë¥˜ í™•ì¸
ns1 ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” ì‚­ì œí–ˆì§€ë§Œ, ê·¸ê³³ì„ ê°€ë¦¬í‚¤ë˜ ns1-dev ì»¨í…ìŠ¤íŠ¸ëŠ” ì—¬ì „íˆ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ì´ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤.

Bash
```
# 1. ns1-dev ì»¨í…ìŠ¤íŠ¸ë¡œ ì „í™˜
k config use-context ns1-dev

# 2. íŒŒë“œ ì¡°íšŒë¥¼ ì‹œë„í•˜ë©´, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒ
k get pods
```
  âŒ ì‹¤ì œ ì˜¤ë¥˜ ì˜ˆì‹œ:  
  Error from server (NotFound): namespaces "ns1" not found

4.3) ë¶ˆí•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ ì‚­ì œ ë° ìµœì¢… í™•ì¸
ë” ì´ìƒ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì»¨í…ìŠ¤íŠ¸ëŠ” ì‚­ì œí•˜ì—¬ ì„¤ì •ì„ ê¹”ë”í•˜ê²Œ ìœ ì§€í•©ë‹ˆë‹¤.

Bash
```
# 1. ë¨¼ì € ì•ˆì „í•˜ê²Œ ì›ë˜ ì»¨í…ìŠ¤íŠ¸ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤.
k config use-context kubernetes-admin@kubernetes

# 2. ì´ì œ ns1-dev ì»¨í…ìŠ¤íŠ¸ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.
k config delete-context ns1-dev

# 3. ì»¨í…ìŠ¤íŠ¸ê°€ ê¹¨ë—í•˜ê²Œ ì •ë¦¬ë˜ì—ˆëŠ”ì§€ ìµœì¢… í™•ì¸í•©ë‹ˆë‹¤.
k config view
```

| ë‹¨ê³„ | ì£¼ìš” ì‘ì—… | í•µì‹¬ ëª…ë ¹ì–´ |
| :--- | :--- | :--- |
| **0. ì¤€ë¹„** | í™˜ê²½ ì •ë¦¬ ë° ë‹¨ì¶•í‚¤ ì„¤ì • | `kubectl delete all --all`, `alias` |
| **1. ê²©ë¦¬** | ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„± ë° ë¦¬ì†ŒìŠ¤ ë¶„ì‚° ë°°í¬ | `kubectl create namespace`, `kubectl create deployment -n` |
| **2. ì„ ì–¸ì  ê´€ë¦¬** | YAML íŒŒì¼ ìƒì„±, ìˆ˜ì • ë° `apply`ë¥¼ í†µí•œ ê´€ë¦¬ | `... --dry-run -o yaml`, `kubectl apply -f` |
| **3. íš¨ìœ¨í™”** | ì»¨í…ìŠ¤íŠ¸ ìƒì„±, ì „í™˜, ë³€ê²½ìœ¼ë¡œ ì‘ì—… ê°„ì†Œí™” | `kubectl config set/use/rename-context` |
| **4. ì •ë¦¬** | ì‚¬ìš©í•œ ë¦¬ì†ŒìŠ¤ ë° ì„¤ì •(ë„¤ì„ìŠ¤í˜ì´ìŠ¤, ì»¨í…ìŠ¤íŠ¸) ì‚­ì œ | `kubectl delete namespace`, `kubectl config delete-context` |


## ì „ì²´ ì‹¤ìŠµ í™˜ê²½ì„ ì´ˆê¸°í™”í•˜ëŠ” ê°€ì´ë“œ
ì‹¤ìŠµ í™˜ê²½ì„ ì²˜ìŒ ìƒíƒœë¡œ ë˜ëŒë¦¬ë ¤ë©´, ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì™€ ë¶ˆí•„ìš”í•œ ì»¨í…ìŠ¤íŠ¸ê¹Œì§€ ëª¨ë‘ ì‚­ì œí•´ì•¼ í•©ë‹ˆë‹¤.

ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í•˜ì„¸ìš”.

Bash
```
# 1. ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ ì‚­ì œë  ìˆ˜ ìˆë„ë¡ ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ë¡œ ì „í™˜ (ì•ˆì „ ì ˆì°¨)
k config use-context kubernetes-admin@kubernetes

# 2. ëª¨ë“  ì‹¤ìŠµ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‚­ì œ
# ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì‚­ì œí•˜ë©´ ê·¸ ì•ˆì— ìˆëŠ” ëª¨ë“  ë¦¬ì†ŒìŠ¤ê°€ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤.
k delete namespace ns1 ns2 ns3

# 3. default ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì— ë‚¨ì•„ìˆëŠ” ë¦¬ì†ŒìŠ¤ ì‚­ì œ (ì„ íƒ ì‚¬í•­)
k delete all --all

# 4. ì‹¤ìŠµ ì¤‘ ìƒì„±í•œ ì»¨í…ìŠ¤íŠ¸ ì‚­ì œ
k config delete-context ns1-context
k config delete-context ns1-dev

# 5. ëª¨ë“  ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ì‚­ì œë˜ì—ˆëŠ”ì§€ í™•ì¸
k get namespace
```

----------------------------------------------------------------------------------------

## ğŸš€ ì¿ ë²„ë„¤í‹°ìŠ¤ ë³¼ë¥¨(Volume) ì™„ì „ ì •ë³µ ì‹¤ìŠµ ê°€ì´ë“œ
ì´ ê°€ì´ë“œëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê³µìœ í•˜ëŠ” ë‹¤ì–‘í•œ ë³¼ë¥¨ íƒ€ì…ì˜ íŠ¹ì§•ê³¼ ì‚¬ìš©ë²•ì„ ì§ì ‘ ì‹¤ìŠµí•˜ë©° ìµí ìˆ˜ ìˆë„ë¡ êµ¬ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

#### ì‹¤ìŠµ 1: emptyDir ë³¼ë¥¨ - Pod ì•ˆì˜ ê³µìœ  ë©”ëª¨ì¥  
ğŸ¯ ëª©í‘œ: Pod ë‚´ì˜ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆê°€ ë°ì´í„°ë¥¼ ê³µìœ í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì¸ emptyDir ë³¼ë¥¨ì˜ ë™ì‘ì„ ì´í•´í•©ë‹ˆë‹¤.

ğŸ’¡ í•µì‹¬ ê°œë…: emptyDir ë³¼ë¥¨ì€ Podê°€ ìƒì„±ë  ë•Œ í•¨ê»˜ ë§Œë“¤ì–´ì§€ëŠ” ì„ì‹œ ì €ì¥ ê³µê°„ì…ë‹ˆë‹¤. Podê°€ ì‚´ì•„ìˆëŠ” ë™ì•ˆì—ëŠ” ìœ ì§€ë˜ì§€ë§Œ, Podê°€ ì‚¬ë¼ì§€ë©´ ë°ì´í„°ë„ í•¨ê»˜ ì‚­ì œë©ë‹ˆë‹¤. í•œ Pod ì•ˆì˜ ì»¨í…Œì´ë„ˆë“¤ì´ íŒŒì¼ì„ ì£¼ê³ ë°›ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë§ˆì¹˜ í•œ íšŒì˜ì‹¤ ì•ˆì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ê³µìœ  í™”ì´íŠ¸ë³´ë“œì™€ ê°™ìŠµë‹ˆë‹¤.

ë‹¨ê³„ë³„ ì‹¤ìŠµ:

1) Sidecar íŒ¨í„´ì„ ì´ìš©í•œ YAML íŒŒì¼ ì‘ì„±  
í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆ(app)ëŠ” 1ì´ˆë§ˆë‹¤ ë¡œê·¸ íŒŒì¼ì— í˜„ì¬ ì‹œê°„ì„ ê¸°ë¡í•˜ê³ , ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆ(sidecar)ëŠ” ê·¸ ë¡œê·¸ íŒŒì¼ì„ ê³„ì†í•´ì„œ ì½ì–´ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” Podë¥¼ ë§Œë“­ë‹ˆë‹¤. emptyDir ë³¼ë¥¨(varlog)ì´ ì´ ë‘ ì»¨í…Œì´ë„ˆì˜ ê³µìœ  í†µë¡œ ì—­í• ì„ í•©ë‹ˆë‹¤.

vl-emptydir.yaml
YAML
```
# vl-emptydir.yaml
apiVersion: v1
kind: Pod
metadata:
  name: sidecar-pod
spec:
  volumes:
  - name: varlog
    emptyDir: {} # ë‘ ì»¨í…Œì´ë„ˆê°€ ê³µìœ í•  ë¹ˆ ë””ë ‰í† ë¦¬ ë³¼ë¥¨
  containers:
  - name: app # 1ì´ˆë§ˆë‹¤ ë¡œê·¸ë¥¼ ì“°ëŠ” ì»¨í…Œì´ë„ˆ
    image: busybox
    args:
    - /bin/sh
    - -c
    - >
      while true; do
        echo "$(date) - Writing log" >> /var/log/example.log;
        sleep 1;
      done
    volumeMounts:
    - name: varlog
      mountPath: /var/log
  - name: sidecar # ë¡œê·¸ë¥¼ ì½ì–´ì„œ ì¶œë ¥í•˜ëŠ” ì»¨í…Œì´ë„ˆ
    image: busybox
    args:
    - /bin/sh
    - -c
    - "tail -f /var/log/example.log"
    volumeMounts:
    - name: varlog
      mountPath: /var/log
```

2) Pod ìƒì„±  
ì‘ì„±í•œ YAML íŒŒì¼ì„ í´ëŸ¬ìŠ¤í„°ì— ì ìš©í•©ë‹ˆë‹¤.

Bash
```
kubectl apply -f vl-emptydir.yaml
```

3) ë™ì‘ í™•ì¸
sidecar ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•˜ë©´, app ì»¨í…Œì´ë„ˆê°€ ê¸°ë¡í•˜ëŠ” ë¡œê·¸ê°€ ê·¸ëŒ€ë¡œ ì¶œë ¥ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Bash
```
# -f ì˜µì…˜ìœ¼ë¡œ ë¡œê·¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•©ë‹ˆë‹¤.
kubectl logs -f sidecar-pod -c sidecar
```

  ì¶œë ¥ ì˜ˆìƒ:
  ```
  Thu Aug 14 17:10:01 KST 2025 - Writing log
  Thu Aug 14 17:10:02 KST 2025 - Writing log
  Thu Aug 14 17:10:03 KST 2025 - Writing log
  ```

4) ì‹¤ìŠµ ë§ˆë¬´ë¦¬
Podë¥¼ ì‚­ì œí•˜ë©´ emptyDir ë³¼ë¥¨ê³¼ ê·¸ ì•ˆì˜ ë¡œê·¸ íŒŒì¼ë„ í•¨ê»˜ ì‚¬ë¼ì§‘ë‹ˆë‹¤.

Bash
```
kubectl delete pod sidecar-pod
```

#### ì‹¤ìŠµ 2: hostPath ë³¼ë¥¨ - Nodeì™€ íŒŒì¼ ê³µìœ 
ğŸ¯ ëª©í‘œ: Podê°€ ì‹¤í–‰ë˜ëŠ” í˜¸ìŠ¤íŠ¸ ë…¸ë“œ(Host Node)ì˜ íŠ¹ì • íŒŒì¼ ì‹œìŠ¤í…œ ê²½ë¡œë¥¼ Pod ë‚´ë¶€ì— ì—°ê²°í•˜ëŠ” hostPath ë³¼ë¥¨ì„ ì‚¬ìš©í•´ ë´…ë‹ˆë‹¤.

ğŸ’¡ í•µì‹¬ ê°œë…: hostPathëŠ” Podê°€ ë…¸ë“œì˜ íŒŒì¼ ì‹œìŠ¤í…œì— ì§ì ‘ ì ‘ê·¼í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤. Podê°€ ì‚­ì œë˜ì–´ë„ ë…¸ë“œì— íŒŒì¼ì´ ê·¸ëŒ€ë¡œ ë‚¨ì•„ ë°ì´í„°ê°€ ìœ ì§€ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ Podê°€ íŠ¹ì • ë…¸ë“œì— ì¢…ì†ë˜ë¯€ë¡œ, ì‹ ì¤‘í•˜ê²Œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

  âš ï¸ ì£¼ì˜: hostPath ì‚¬ìš©ì˜ ìœ„í—˜ì„±
  hostPathëŠ” ë…¸ë“œì˜ ë¯¼ê°í•œ íŒŒì¼ì„ ë…¸ì¶œí•˜ê±°ë‚˜ ì‹œìŠ¤í…œì„ ì†ìƒì‹œí‚¬ ìˆ˜ ìˆì–´ ìš´ì˜ í™˜ê²½(Production)ì—ì„œëŠ” ì‚¬ìš©ì„ ì ê·¹ì ìœ¼ë¡œ í”¼í•´ì•¼ í•©ë‹ˆë‹¤. ë…¸ë“œ ë ˆë²¨ì˜ ë¡œê·¸ ìˆ˜ì§‘ ë“± ì‹œìŠ¤í…œì— ëŒ€í•œ ê¹Šì€ ì´í•´ê°€ í•„ìš”í•œ ì œí•œëœ ìš©ë„ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.

ë‹¨ê³„ë³„ ì‹¤ìŠµ:

1) hostPath ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” Pod YAML ì‘ì„±  
Nginx ì»¨í…Œì´ë„ˆì˜ /data ê²½ë¡œë¥¼ í˜¸ìŠ¤íŠ¸ ë…¸ë“œì˜ /tmp/pod-data ê²½ë¡œì™€ ì—°ê²°í•˜ëŠ” Podë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

vl-hostpath.yaml
YAML
```
# vl-hostpath.yaml
apiVersion: v1
kind: Pod
metadata:
  name: hostpath-pod
spec:
  containers:
  - name: web-server
    image: nginx:1.14
    volumeMounts:
    - name: host-storage
      mountPath: /data
  volumes:
  - name: host-storage
    hostPath:
      path: /tmp/pod-data # í˜¸ìŠ¤íŠ¸ ë…¸ë“œì˜ ì´ ê²½ë¡œë¥¼ ì‚¬ìš©
      type: DirectoryOrCreate # ê²½ë¡œê°€ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ìƒì„±
```

2) Pod ìƒì„± ë° ì‹¤í–‰ ë…¸ë“œ í™•ì¸  
Podë¥¼ ìƒì„±í•˜ê³ , ì–´ëŠ ë…¸ë“œì—ì„œ ì‹¤í–‰ë˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

Bash
```
kubectl apply -f vl-hostpath.yaml
kubectl get pod hostpath-pod -o wide
```

3) Pod ë‚´ë¶€ì—ì„œ íŒŒì¼ ìƒì„±
exec ëª…ë ¹ìœ¼ë¡œ Podì— ì ‘ì†í•˜ì—¬, ê³µìœ ëœ /data ë””ë ‰í„°ë¦¬ì— íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤.

Bash
```
kubectl exec -it hostpath-pod -- /bin/bash
```

Bash
```
# --- Pod ë‚´ë¶€ ì‰˜ì—ì„œ ì‹¤í–‰ ---
root@hostpath-pod:/# echo "Hello from the Pod!" > /data/pod-message.txt
root@hostpath-pod:/# exit
```

4) í˜¸ìŠ¤íŠ¸ ë…¸ë“œì—ì„œ íŒŒì¼ í™•ì¸
2ë‹¨ê³„ì—ì„œ í™•ì¸í•œ ë…¸ë“œì— SSHë¡œ ì ‘ì†í•˜ì—¬, Podì—ì„œ ìƒì„±í•œ íŒŒì¼ì´ ì‹¤ì œë¡œ ë…¸ë“œì— ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

Bash
```
# ì˜ˆ: ssh root@node1.labs.local
ssh root@<PODê°€-ì‹¤í–‰ëœ-ë…¸ë“œ-IP>
```
Bash
```
# --- ë…¸ë“œ ë‚´ë¶€ ì‰˜ì—ì„œ ì‹¤í–‰ ---
$ cat /tmp/pod-data/pod-message.txt
```
  ì¶œë ¥ ì˜ˆìƒ: Hello from the Pod!

5) ì‹¤ìŠµ ë§ˆë¬´ë¦¬  
Podë¥¼ ì‚­ì œí•´ë„ ë…¸ë“œì— ìƒì„±ëœ íŒŒì¼ì€ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Bash
```
kubectl delete pod hostpath-pod
```

#### ì‹¤ìŠµ 3: PersistentVolume(PV)ê³¼ PVC - ì˜ì†ì  ë°ì´í„° ê´€ë¦¬ì˜ í‘œì¤€
ğŸ¯ ëª©í‘œ: ê´€ë¦¬ìê°€ ì œê³µí•˜ëŠ” ìŠ¤í† ë¦¬ì§€(PV)ë¥¼ ê°œë°œìê°€ ìš”ì²­(PVC)í•˜ì—¬ ì‚¬ìš©í•˜ëŠ”, ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ í‘œì¤€ ì˜ì† ë°ì´í„° ê´€ë¦¬ ë°©ë²•ì„ ìµí™ë‹ˆë‹¤. ì´ë²ˆ ì‹¤ìŠµì€ NFSì™€ Local Volume ë‘ ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.

ğŸ’¡ í•µì‹¬ ê°œë…: PVì™€ PVCëŠ” ìŠ¤í† ë¦¬ì§€ ê´€ë¦¬ì™€ ì‚¬ìš©ì„ ë¶„ë¦¬í•˜ëŠ” ê°œë…ì…ë‹ˆë‹¤.

  PersistentVolume (PV): í´ëŸ¬ìŠ¤í„° ê´€ë¦¬ìê°€ ì¤€ë¹„í•´ ë‘” ìŠ¤í† ë¦¬ì§€ ìì›ì…ë‹ˆë‹¤. (NFS, í´ë¼ìš°ë“œ ë””ìŠ¤í¬ ë“±)

  PersistentVolumeClaim (PVC): **ê°œë°œì(ì‚¬ìš©ì)**ê°€ "ì´ ì •ë„ í¬ê¸°ì˜ ìŠ¤í† ë¦¬ì§€ê°€ í•„ìš”í•´ìš”" ë¼ê³  ìš”ì²­í•˜ëŠ” ë¬¸ì„œì…ë‹ˆë‹¤.

  ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ìš”ì²­ëœ PVCì— ê°€ì¥ ì í•©í•œ PVë¥¼ ì°¾ì•„ ì—°ê²°(Bind)í•´ ì¤ë‹ˆë‹¤.

3-A. NFSë¥¼ ì´ìš©í•œ ê³µìœ  ë³¼ë¥¨ ì‹¤ìŠµ
ì‚¬ì „ ì¤€ë¹„: NFS ì„œë²„ êµ¬ì„±
ë¨¼ì € í´ëŸ¬ìŠ¤í„°ì˜ ëª¨ë“  ë…¸ë“œê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” NFS ì„œë²„ë¥¼ ì¤€ë¹„í•©ë‹ˆë‹¤. (ì˜ˆ: 192.168.108.3 IPë¥¼ ê°€ì§„ ë³„ë„ì˜ ì„œë²„)

  ğŸ’¡ Note: ì•„ë˜ ê¶Œí•œ ì„¤ì •(777, no_root_squash)ì€ ì‹¤ìŠµ í¸ì˜ë¥¼ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤. ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë³´ì•ˆì„ ê³ ë ¤í•˜ì—¬ ë” ì—„ê²©í•œ ê¶Œí•œì„ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

Bash
```
# --- NFS ì„œë²„ì—ì„œ ì‹¤í–‰ ---
sudo apt update
sudo apt install -y nfs-kernel-server
sudo mkdir -p /srv/nfs/shared-data
sudo chown nobody:nogroup /srv/nfs/shared-data
sudo chmod 777 /srv/nfs/shared-data
echo "/srv/nfs/shared-data *(rw,sync,no_subtree_check,no_root_squash)" | sudo tee /etc/exports
sudo exportfs -a
sudo systemctl restart nfs-kernel-server

# --- ëª¨ë“  ì¿ ë²„ë„¤í‹°ìŠ¤ ë…¸ë“œì—ì„œ ì‹¤í–‰ ---
sudo apt update
sudo apt install -y nfs-common
```

ë‹¨ê³„ë³„ ì‹¤ìŠµ:

1) PV, PVC, Pod YAML íŒŒì¼ ì‘ì„±  
ì•„ë˜ ì„¸ ë¦¬ì†ŒìŠ¤ë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ nfs-all-in-one.yaml ë¡œ ë§Œë“­ë‹ˆë‹¤.

vi nfs-all-in-one.yaml
YAML
```
# nfs-all-in-one.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: my-nfs-pv
spec:
  capacity:
    storage: 2Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteMany # ì—¬ëŸ¬ Podì—ì„œ ë™ì‹œ ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
  persistentVolumeReclaimPolicy: Recycle
  storageClassName: manual
  nfs:
    server: 192.168.108.3 # NFS ì„œë²„ IP
    path: "/srv/nfs/shared-data" # NFS ê³µìœ  ê²½ë¡œ
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-nfs-pvc
spec:
  accessModes:
    - ReadWriteMany
  volumeMode: Filesystem
  resources:
    requests:
      storage: 2Gi
  storageClassName: manual
---
apiVersion: v1
kind: Pod
metadata:
  name: nfs-test-pod
spec:
  containers:
  - name: nginx
    image: nginx:1.14
    ports:
    - containerPort: 80
    volumeMounts:
    - mountPath: /usr/share/nginx/html
      name: nfs-storage
  volumes:
  - name: nfs-storage
    persistentVolumeClaim:
      claimName: my-nfs-pvc
```

2) ë¦¬ì†ŒìŠ¤ ìƒì„± ë° ìƒíƒœ í™•ì¸
ì‘ì„±í•œ ë¦¬ì†ŒìŠ¤ë“¤ì„ í•œ ë²ˆì— ìƒì„±í•˜ê³ , PVì™€ PVCê°€ Bound ìƒíƒœë¡œ ì˜ ì—°ê²°ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

Bash
```
kubectl apply -f nfs-all-in-one.yaml
```

Bash
```
# PVì™€ PVC ìƒíƒœ í™•ì¸
kubectl get pv,pvc
```
  ì¶œë ¥ ì˜ˆìƒ:
  ```
  NAME                        CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                STORAGECLASS   REASON   AGE
  persistentvolume/my-nfs-pv   2Gi        RWX            Recycle          Bound    default/my-nfs-pvc   manual                  20s
  NAME                               STATUS   VOLUME       CAPACITY   ACCESS MODES   STORAGECLASS   AGE
  persistentvolumeclaim/my-nfs-pvc   Bound    my-nfs-pv    2Gi        RWX            manual         20s
  ```

3) ë°ì´í„° ê³µìœ  í™•ì¸
Podì— ì ‘ì†í•˜ì—¬ index.html íŒŒì¼ì„ ìƒì„±í•˜ê³ , NFS ì„œë²„ì—ì„œ íŒŒì¼ì´ ë³´ì´ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

Bash
```
kubectl exec -it nfs-test-pod -- /bin/bash -c 'echo "Hello from NFS!" > /usr/share/nginx/html/index.html'
```

Bash
```
# NFS ì„œë²„ì— ì ‘ì†í•´ì„œ í™•ì¸
ssh root@192.168.108.3
cat /srv/nfs/shared-data/index.html
```
  ì¶œë ¥ ì˜ˆìƒ: Hello from NFS!

4) ì‹¤ìŠµ ë§ˆë¬´ë¦¬  
YAML íŒŒì¼ í•˜ë‚˜ë¡œ ìƒì„±í•œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤.

Bash
```
kubectl delete -f nfs-all-in-one.yaml
```

3-B. Local Persistent Volume ì‹¤ìŠµ
ì‹œë‚˜ë¦¬ì˜¤: íŠ¹ì • ë…¸ë“œ(node1.labs.local)ì—ë§Œ ì¥ì°©ëœ ê³ ì† SSDë¥¼ ë°ì´í„°ë² ì´ìŠ¤ Podê°€ ì‚¬ìš©í•˜ë„ë¡ ë°°í¬í•©ë‹ˆë‹¤.

  ğŸ’¡ í•µì‹¬: ì´ ì‹¤ìŠµì€ StorageClassì˜ volumeBindingMode: WaitForFirstConsumerì™€ PVì˜ nodeAffinityë¥¼ ì¡°í•©í•˜ì—¬, Podê°€ ìŠ¤ì¼€ì¤„ë§ë  ë•Œ ë¹„ë¡œì†Œ ìŠ¤í† ë¦¬ì§€ì˜ ìœ„ì¹˜(ë…¸ë“œ)ë¥¼ ê³ ë ¤í•˜ê²Œ ë§Œë“œëŠ” ì§€ëŠ¥ì ì¸ ìŠ¤ì¼€ì¤„ë§ ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.

ë‹¨ê³„ë³„ ì‹¤ìŠµ:

1. [node1] Local Volume ë””ë ‰í† ë¦¬ ìƒì„±
master ë…¸ë“œì—ì„œ node1.labs.localë¡œ SSH ì ‘ì†í•˜ì—¬ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

Bash
```
ssh node1.labs.local
# --- node1ì—ì„œ ì‹¤í–‰ ---
sudo mkdir -p /mnt/fast-ssd/postgresql
```

2) [master] StorageClass ìƒì„±  
ë‹¤ì‹œ master ë…¸ë“œë¡œ ëŒì•„ì™€, Pod ìƒì„±ì„ ê¸°ë‹¤ë¦¬ëŠ” StorageClassë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

YAML
```
# local-storage.yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: local-fast-ssd
provisioner: kubernetes.io/no-provisioner
volumeBindingMode: WaitForFirstConsumer
```
Bash
```
kubectl apply -f local-storage.yaml
```

3) [master] Local PersistentVolume(PV) ìƒì„±  
node1ì˜ ë””ë ‰í† ë¦¬ë¥¼ ê°€ë¦¬í‚¤ê³ , node1ì—ë§Œ ì¡´ì¬í•¨ì„ ì•Œë¦¬ëŠ” PVë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

vi local-pv.yaml
YAML
```
# local-pv.yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: fast-ssd-pv-for-node1
spec:
  capacity:
    storage: 5Gi
  volumeMode: Filesystem
  accessModes:
    - ReadWriteOnce
  persistentVolumeReclaimPolicy: Retain
  storageClassName: local-fast-ssd
  local:
    path: /mnt/fast-ssd/postgresql
  nodeAffinity:
    required:
      nodeSelectorTerms:
      - matchExpressions:
        - key: kubernetes.io/hostname
          operator: In
          values:
          - node1.labs.local
```
Bash
```
kubectl apply -f local-pv.yaml
```

4) [master] PersistentVolumeClaim(PVC) ìƒì„±  
local-fast-ssd ìŠ¤í† ë¦¬ì§€ë¥¼ ìš”ì²­í•˜ëŠ” PVCë¥¼ ì •ì˜í•˜ê³ , ìƒíƒœê°€ Pendingì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.

vi db-pvc.yaml
YAML
```
# db-pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: postgres-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: local-fast-ssd
  resources:
    requests:
      storage: 3Gi
```
Bash
```
kubectl apply -f db-pvc.yaml
kubectl get pvc postgres-pvc
```

  ì¶œë ¥ ì˜ˆìƒ: STATUSê°€ Pendingìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.

5) [master] Pod ë°°í¬ ë° ìµœì¢… ê²°ê³¼ í™•ì¸  
ìƒì„±í•œ PVCë¥¼ ì‚¬ìš©í•˜ëŠ” PostgreSQL Podë¥¼ ë°°í¬í•˜ì—¬ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

vi postgres-pod.yaml
YAML
```
# postgres-pod.yaml
apiVersion: v1
kind: Pod
metadata:
  name: high-perf-db
spec:
  containers:
  - name: postgres
    image: postgres:13
    env:
    - name: POSTGRES_PASSWORD
      value: "password"
    ports:
    - containerPort: 5432
    volumeMounts:
    - mountPath: /var/lib/postgresql/data
      name: db-data
  volumes:
  - name: db-data
    persistentVolumeClaim:
      claimName: postgres-pvc
```
Bash
```
kubectl apply -f postgres-pod.yaml
```

ì ì‹œ í›„, Podì˜ ìƒíƒœì™€ ì–´ëŠ ë…¸ë“œì— ë°°í¬ë˜ì—ˆëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

Bash
```
kubectl get pod high-perf-db -o wide
```
  ê²°ê³¼: high-perf-db Podê°€ PVê°€ ì¡´ì¬í•˜ëŠ” node1.labs.localì— ì •í™•íˆ ë°°í¬ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì œ PVì™€ PVCì˜ ìƒíƒœë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ë©´ Boundë¡œ ë³€ê²½ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Bash
```
kubectl get pv,pvc
```

6) ì‹¤ìŠµ ë§ˆë¬´ë¦¬
ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì—­ìˆœìœ¼ë¡œ ì‚­ì œí•©ë‹ˆë‹¤.

Bash
```
kubectl delete pod high-perf-db
kubectl delete pvc postgres-pvc
kubectl delete pv fast-ssd-pv-for-node1
kubectl delete sc local-fast-ssd
```