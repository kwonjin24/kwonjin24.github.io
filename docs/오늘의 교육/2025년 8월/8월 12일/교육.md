---
layout: default
title: 
parent: 8μ›” 12μΌ
nav_order: 2
---

# 2025λ…„ 8μ›” 12μΌ κµμ΅ λ‚΄μ©

# μΏ λ²„λ„¤ν‹°μ¤

kubectl

run : ν¬λ¦¬μ—μ΄νΈμ™€ μ‹¤ν–‰μ„ λ™μ‹ν•΄ ν•λ‹¤

* λ¦¬λ…μ¤ μ°λ¶„ν¬
kubectl run pod-1 --image=nginx:1.14
kubectl get pods
kubectl delete pods pod-1

* μλ„μ° λ…λ Ή ν”„λ΅¬ν”„νΈ
kubectl cluster-info
Kubernetes control plane is running at https://10.10.8.103:6443
CoreDNS is running at https://10.10.8.103:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy

To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.

kubectl api-resources | more

kubectl get pods
kubectl get no
kubectl explain pods

D:\kube-menifests\nginx>

kubectl run podname1 --image=ubuntu:latest
kubectl describe pod podname1

kubectl get po -n default

kubectl delete po podname1

kubectl version

kubectl get pods --all-namespaces

----------------------------------------------------------------

## β… 1. κΈ°λ³Έ μ—°κ²° λ° μ •λ³΄ ν™•μΈ  
κ°€μ¥ λ¨Όμ € kubectlμ΄ ν΄λ¬μ¤ν„°μ™€ μ λ€λ΅ ν†µμ‹ ν•λ”μ§€ ν™•μΈν•λ” λ‹¨κ³„μ…λ‹λ‹¤.

1) λ²„μ „ ν™•μΈ  
kubectlκ³Ό ν΄λ¬μ¤ν„°μ λ²„μ „μ„ ν™•μΈν•©λ‹λ‹¤. μ΄ λ…λ Ήμ–΄κ°€ μ„±κ³µμ μΌλ΅ μ‹¤ν–‰λλ©΄ κΈ°λ³Έμ μΈ μ—°κ²°μ€ μ„±κ³µν• κ²ƒμ…λ‹λ‹¤.

DOS
```
kubectl version
```
μ„±κ³µ μμ‹: Client Versionκ³Ό Server Version μ •λ³΄κ°€ λ¨λ‘ μ—λ¬ μ—†μ΄ λ‚νƒ€λ‚λ©΄ λ©λ‹λ‹¤.

2) ν΄λ¬μ¤ν„° μ •λ³΄ ν™•μΈ  
ν„μ¬ μ—°κ²°λ ν΄λ¬μ¤ν„°μ ν•µμ‹¬ κµ¬μ„±μ”μ†(Control Plane) μ£Όμ†λ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.

DOS
```
kubectl cluster-info
```

3) λ…Έλ“(Node) λ©λ΅ ν™•μΈ  
ν΄λ¬μ¤ν„°μ— ν¬ν•¨λ μ‘μ—… μ„λ²„(λ…Έλ“)λ“¤μ λ©λ΅κ³Ό μƒνƒλ¥Ό ν™•μΈν•©λ‹λ‹¤. STATUSκ°€ Readyλ΅ ν‘μ‹λμ–΄μ•Ό ν•©λ‹λ‹¤.

DOS
```
kubectl get nodes
```
μ΄ λ…λ Ήμ–΄κ°€ μ„±κ³µν•λ©΄ ν΄λ¬μ¤ν„°λ¥Ό μ μ–΄ν•  μ¤€λΉ„κ°€ μ™„λ£λ κ²ƒμ…λ‹λ‹¤.

## β„ΉοΈ 2. ν΄λ¬μ¤ν„° λ‚΄λ¶€ μƒνƒ μ΅°ν
μ‹¤μ λ΅ ν΄λ¬μ¤ν„° λ‚΄λ¶€μ μμ›λ“¤μ„ μ΅°νν•λ” λ‹¨κ³„μ…λ‹λ‹¤.

1) μ „μ²΄ λ„¤μ„μ¤νμ΄μ¤μ νλ“(Pod) ν™•μΈ  
ν΄λ¬μ¤ν„°μ—μ„ μ‹¤ν–‰ μ¤‘μΈ λ¨λ“  νλ“(μ• ν”λ¦¬μΌ€μ΄μ… λ‹¨μ„) λ©λ΅μ„ ν™•μΈν•©λ‹λ‹¤. μΏ λ²„λ„¤ν‹°μ¤ μ‹μ¤ν…μ„ μ„ν• νλ“λ“¤λ„ ν•¨κ» λ³΄μ…λ‹λ‹¤.

DOS
```
kubectl get pods --all-namespaces
```
λλ” λ‹¨μ¶• λ…λ Ήμ–΄μΈ -Aλ¥Ό μ‚¬μ©ν•΄λ„ λ©λ‹λ‹¤: kubectl get pods -A

2) λ„¤μ„μ¤νμ΄μ¤(Namespace) λ©λ΅ ν™•μΈ  
ν΄λ¬μ¤ν„° λ‚΄λ¶€μ λ…Όλ¦¬μ μΈ κ³µκ°„ λ¶„λ¦¬ λ‹¨μ„μΈ λ„¤μ„μ¤νμ΄μ¤ λ©λ΅μ„ λ΄…λ‹λ‹¤.

DOS
```
kubectl get namespaces
```
default, kube-system λ“±μ΄ λ³΄μ΄λ©΄ μ •μƒμ…λ‹λ‹¤.

## π€ 3. κ°„λ‹¨ν• ν…μ¤νΈ λ°°ν¬ λ° μ‚­μ  (μ‹¤μµ)
κ°€μ¥ ν™•μ‹¤ν• ν…μ¤νΈλ” μ§μ ‘ κ°„λ‹¨ν• μ›Ήμ„λ²„λ¥Ό λ°°ν¬ν•΄λ³΄λ” κ²ƒμ…λ‹λ‹¤. Nginx μ›Ήμ„λ²„λ¥Ό λ°°ν¬ν•κ³  μ‚­μ ν•λ” κ³Όμ •μ…λ‹λ‹¤.

1) Nginx λ°°ν¬ (Deployment μƒμ„±)
Nginx μ΄λ―Έμ§€λ¥Ό μ‚¬μ©ν•λ” λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μƒμ„±ν•©λ‹λ‹¤. "Nginx μ»¨ν…μ΄λ„ 1κ°λ¥Ό μ‹¤ν–‰μ‹μΌμ¤"λΌλ” λ…λ Ήμ…λ‹λ‹¤.

DOS
```
kubectl create deployment nginx --image=nginx
```

2) λ°°ν¬ μƒνƒ ν™•μΈ
λ°©κΈ μƒμ„±ν• nginx νλ“κ°€ Running μƒνƒκ°€ λ  λ•κΉμ§€ ν™•μΈν•©λ‹λ‹¤. (μ²μμ—λ” ContainerCreating μƒνƒμΌ μ μμµλ‹λ‹¤.)

DOS
```
kubectl get pods
```

3) λ΅κ·Έ ν™•μΈ
μ‹¤ν–‰ μ¤‘μΈ nginx νλ“μ λ΅κ·Έλ¥Ό ν™•μΈν•μ—¬ μ •μƒμ μΌλ΅ μ‘λ™ν•λ”μ§€ λ΄…λ‹λ‹¤.

DOS
```
kubectl logs deployment/nginx
```
4) π§Ή ν…μ¤νΈ μμ› μ‚­μ  (μ¤‘μ”!)
ν…μ¤νΈκ°€ λλ‚¬μΌλ©΄ λ°°ν¬ν–λ μμ›μ„ κΉ¨λ—ν•κ² μ‚­μ ν•©λ‹λ‹¤.

DOS
```
kubectl delete deployment nginx
```
μ΄ λ…λ Ήμ–΄λ“¤μ΄ λ¨λ‘ μ—λ¬ μ—†μ΄ μ‹¤ν–‰λλ‹¤λ©΄, μΏ λ²„λ„¤ν‹°μ¤ ν΄λ¬μ¤ν„°λ¥Ό μ‚¬μ©ν•κΈ° μ„ν• λ¨λ“  μ„¤μ •μ΄ μ™„λ²½ν•κ² λλ‚ κ²ƒμ…λ‹λ‹¤.

----------------------------------------------------------------

## ν„μ¬ λ„¤μ„μ¤νμ΄μ¤μ— μλ” λ¨λ“  νλ“(Pod)μ λ©λ΅μ„ μƒμ„Έν•κ² λ³΄μ—¬μ¤λ‹λ‹¤.
```
kubectl get pods -o wide
```

----------------------------------------------------------------

## π“ μΏ λ²„λ„¤ν‹°μ¤ κΈ°λ³Έ λ…λ Ήμ–΄ μ‹¤μµ (λ…Όλ¦¬μ μΈ μμ„)
μ΄ κ°€μ΄λ“λ” κ°€μ¥ μ‘μ€ λ‹¨μ„μΈ Podμ—μ„ μ‹μ‘ν•μ—¬, μ• ν”λ¦¬μΌ€μ΄μ… κ΄€λ¦¬ λ‹¨μ„μΈ Deployment, κ·Έλ¦¬κ³  κ°€μ¥ κ¶μ¥λλ” λ°©μ‹μΈ YAML νμΌμ„ μ‚¬μ©ν• κ΄€λ¦¬ μμ„λ΅ μ§„ν–‰λ©λ‹λ‹¤.

## 1λ¶€: κ°€μ¥ μ‘μ€ λ‹¨μ„, νλ“(Pod) λ‹¤λ£¨κΈ°
μΏ λ²„λ„¤ν‹°μ¤μ—μ„ μ‹¤ν–‰λλ” μ»¨ν…μ΄λ„μ κ°€μ¥ μ‘μ€ λ‹¨μ„μΈ νλ“λ¥Ό μ§μ ‘ λ§λ“¤κ³ , ν™•μΈν•κ³ , μ ‘μ†ν•΄ λ΄…λ‹λ‹¤.

1) Nginx νλ“ μƒμ„±ν•κΈ°  
κ°€μ¥ λ¨Όμ €, nginx:1.14 μ΄λ―Έμ§€λ¥Ό μ‚¬μ©ν•λ” nginxλΌλ” μ΄λ¦„μ νλ“ ν• κ°λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

Bash
```
kubectl run nginx --image=nginx:1.14
```

2) νλ“ μƒνƒ λ° IP ν™•μΈν•κΈ°  
νλ“κ°€ μ μƒμ„±λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤. -o wide μµμ…μ„ μ¶”κ°€ν•λ©΄ νλ“κ°€ μ–΄λ–¤ λ…Έλ“μ— μƒμ„±λμ—λ”μ§€, μ–΄λ–¤ IPλ¥Ό ν• λ‹Ήλ°›μ•λ”μ§€ λ“± λ” μμ„Έν• μ •λ³΄λ¥Ό λ³Ό μ μμµλ‹λ‹¤.

Bash
```
kubectl get pods -o wide
```

3) νλ“ μƒμ„Έ μ •λ³΄ μ΅°νν•κΈ°  
describe λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ©΄ νλ“μ μ΄λ²¤νΈ λ΅κ·Έ, μƒνƒ, λ³Όλ¥¨ μ •λ³΄ λ“± λ§¤μ° μƒμ„Έν• λ‚΄μ©μ„ ν™•μΈν•  μ μμµλ‹λ‹¤. λ¬Έμ κ°€ μƒκ²Όμ„ λ• κ°€μ¥ λ¨Όμ € μ‚¬μ©ν•λ” λ…λ Ήμ–΄ μ¤‘ ν•λ‚μ…λ‹λ‹¤.

Bash
```
kubectl describe pod nginx
```
4) μ‹¤ν–‰ μ¤‘μΈ νλ“μ— μ ‘μ†ν•κΈ°  
exec λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•λ©΄ μ‹¤ν–‰ μ¤‘μΈ μ»¨ν…μ΄λ„ λ‚΄λ¶€μ— μ§μ ‘ λ“¤μ–΄κ°€μ„ λ…λ Ήμ„ λ‚΄λ¦΄ μ μμµλ‹λ‹¤. λ§μΉ SSHλ΅ μ ‘μ†ν•λ” κ²ƒκ³Ό λΉ„μ·ν•©λ‹λ‹¤.

Bash
```
# nginx μ»¨ν…μ΄λ„ μ•μΌλ΅ /bin/bash μ…Έμ„ μ‹¤ν–‰ν•λ©° μ ‘μ†
kubectl exec -it nginx -- /bin/bash
```

5) νλ“ IP μ£Όμ† ν™•μΈν•κΈ°
execλ¥Ό μ΄μ©ν•΄ μ»¨ν…μ΄λ„ λ‚΄λ¶€μ—μ„ λ…λ Ήμ„ μ‹¤ν–‰ν•κ³  κ²°κ³Όλ§ λ³Ό μλ„ μμµλ‹λ‹¤. μ•„λ λ…λ Ήμ–΄λ” nginx νλ“μ λ‚΄λ¶€ IPλ¥Ό μ¶λ ¥ν•©λ‹λ‹¤.

Bash
```
kubectl exec nginx -- hostname -I
```

6) νλ“ μ •λ¦¬ν•κΈ°
μ‹¤μµμ΄ λλ‚ νλ“λ¥Ό μ‚­μ ν•©λ‹λ‹¤.

Bash
```
kubectl delete pod nginx
```

## 2λ¶€: μ• ν”λ¦¬μΌ€μ΄μ… κ΄€λ¦¬, λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment)
νλ“λ¥Ό ν•λ‚μ”© κ΄€λ¦¬ν•λ” κ²ƒμ€ λΉ„ν¨μ¨μ μ…λ‹λ‹¤. λ””ν”λ΅μ΄λ¨ΌνΈλ” μ—¬λ¬ κ°μ λ™μΌν• νλ“λ¥Ό μ•μ •μ μΌλ΅ μ μ§€ν•κ³  κ΄€λ¦¬(μλ™ λ³µκµ¬, ν™•μ¥ λ“±)ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

1) Nginx λ””ν”λ΅μ΄λ¨ΌνΈ μƒμ„±ν•κΈ°
μ΄λ²μ—λ” λ™μΌν• Nginx νλ“ 4κ°λ¥Ό μ μ§€ν•λ„λ΅ ν•λ” λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μƒμ„±ν•©λ‹λ‹¤.

Bash
```
kubectl create deployment nginx --image=nginx:1.14 --replicas=4
```

2) λ””ν”λ΅μ΄λ¨ΌνΈ λ° νλ“ μƒνƒ ν™•μΈν•κΈ°
λ””ν”λ΅μ΄λ¨ΌνΈκ°€ μ–΄λ–»κ² 4κ°μ νλ“λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

Bash
```
# μ¶•μ•½ν• μ‚¬μ©: deployments -> deploy
kubectl get deploy,pods -o wide
```

3) μλ™ λ³µκµ¬ κΈ°λ¥ ν…μ¤νΈν•κΈ° (μΏ λ²„λ„¤ν‹°μ¤μ ν•µμ‹¬!)
λ””ν”λ΅μ΄λ¨ΌνΈμ κ°€μ¥ κ°•λ ¥ν• κΈ°λ¥ μ¤‘ ν•λ‚μΈ 'μλ™ λ³µκµ¬'λ¥Ό μ§μ ‘ ν™•μΈν•΄ λ΄…λ‹λ‹¤.

Bash
```
# 1. ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ νλ“ μ¤‘ ν•λ‚μ μ „μ²΄ μ΄λ¦„μ„ λ³µμ‚¬ν•©λ‹λ‹¤.
kubectl get pods

# 2. λ³µμ‚¬ν• μ΄λ¦„μΌλ΅ νλ“ ν•λ‚λ¥Ό κ°•μ λ΅ μ‚­μ ν•©λ‹λ‹¤.
kubectl delete pods <λ³µμ‚¬ν•_νλ“_μ΄λ¦„>

# 3. λ‹¤μ‹ νλ“ λ©λ΅μ„ ν™•μΈν•λ©΄, μ μ‹ ν›„ μƒλ΅μ΄ νλ“κ°€ μλ™μΌλ΅ μƒμ„±λλ” κ²ƒμ„ λ³Ό μ μμµλ‹λ‹¤!
kubectl get pods
```

4) λ””ν”λ΅μ΄λ¨ΌνΈ μ •λ¦¬ν•κΈ°
νλ“λ¥Ό κ°λ³„μ μΌλ΅ μ§€μΈ ν•„μ” μ—†μ΄, λ””ν”λ΅μ΄λ¨ΌνΈλ§ μ‚­μ ν•λ©΄ κ΄€λ ¨λ λ¨λ“  νλ“κ°€ ν•¨κ» μ‚­μ λ©λ‹λ‹¤.

Bash
```
kubectl delete deployment nginx
```

## 3λ¶€: κ°€μ¥ κ¶μ¥λλ” λ°©μ‹, YAML νμΌλ΅ κ΄€λ¦¬ν•κΈ°
λ…λ Ήμ–΄λ΅ λ¦¬μ†μ¤λ¥Ό κ΄€λ¦¬ν•λ” κ²ƒμ€ νΈλ¦¬ν•μ§€λ§, μ„¤μ • λ‚΄μ©μ΄ λ³µμ΅ν•΄μ§€λ©΄ κ΄€λ¦¬ν•κΈ° μ–΄λ µμµλ‹λ‹¤. YAML νμΌμ„ μ‚¬μ©ν•λ©΄ λ¦¬μ†μ¤ μ„¤μ •μ„ μ½”λ“λ΅ κ΄€λ¦¬(Infrastructure as Code)ν•  μ μμ–΄ λ§¤μ° ν¨μ¨μ μ…λ‹λ‹¤.

1) YAML νμΌ μ‘μ„±ν•κΈ°
deploy-nginx.yamlμ΄λΌλ” μ΄λ¦„μΌλ΅ μ•„λ λ‚΄μ©μ νμΌμ„ μƒμ„±ν•©λ‹λ‹¤.

YAML
```
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.14
        ports:
        - containerPort: 80
```

2) YAML νμΌλ΅ λ””ν”λ΅μ΄λ¨ΌνΈ μƒμ„±ν•κΈ°
μ‘μ„±ν• νμΌμ„ kubectlμ— μ „λ‹¬ν•μ—¬ λ¦¬μ†μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

Bash
```
kubectl create -f deploy-nginx.yaml
```

3) μƒμ„±λ λ¦¬μ†μ¤ ν™•μΈν•κΈ°
λ””ν”λ΅μ΄λ¨ΌνΈμ μ „μ²΄ YAML μ„¤μ •μ„ ν™•μΈν•κ³  μ‹¶μ„ λ• μ‚¬μ©ν•©λ‹λ‹¤.

Bash
```
kubectl get deploy nginx-deployment -o yaml
```

4) YAML νμΌλ΅ λ¦¬μ†μ¤ μ‚­μ ν•κΈ°
μƒμ„±ν•  λ• μ‚¬μ©ν–λ νμΌλ΅ μ‚­μ κΉμ§€ κΉ”λ”ν•κ² κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.

Bash
```
kubectl delete -f deploy-nginx.yaml
```

## 4λ¶€: κΈ°νƒ€ μ μ©ν• μ΅°ν λ…λ Ήμ–΄
ν΄λ¬μ¤ν„° μ „λ°μ μƒνƒλ¥Ό ν™•μΈν•  λ• μ‚¬μ©ν•λ” λ…λ Ήμ–΄λ“¤μ…λ‹λ‹¤.

Bash
```
# ν΄λ¬μ¤ν„°μ— μ°Έμ—¬ν• λ¨λ“  λ…Έλ“(μ„λ²„) λ©λ΅ λ³΄κΈ°
kubectl get nodes

# νΉμ • λ…Έλ“μ μƒμ„Έ μ •λ³΄ λ³΄κΈ° (CPU/λ©”λ¨λ¦¬ μ‚¬μ©λ‰, μ‹¤ν–‰ μ¤‘μΈ νλ“ λ“±)
kubectl describe node <λ…Έλ“_μ΄λ¦„>
```
* νλ“ λ΅κ·Έ ν™•μΈ (CrashLoopBackOff λ“± λ¬Έμ  μμ„ λ•)

Bash
```
kubectl logs <νλ“_μ΄λ¦„>
```

* λ„¤νΈμ›ν¬ ν…μ¤νΈ μ‹ μ¬λ°”λ¥Έ curl λ…λ Ήμ–΄ μμ‹

Bash
```
curl http://<νλ“ip>
```

----------------------------------------------------------------

## π“ μΏ λ²„λ„¤ν‹°μ¤ μ‹¤μ „ λ…λ Ήμ–΄ μ›ν¬ν”λ΅μ°
## 0. μ¤€λΉ„ λ° ν™κ²½ μ„¤μ •  

1) λ¨λ“  λ¦¬μ†μ¤ μ •λ¦¬ (μ‹¤μµ μ‹μ‘ μ „)
κΉ¨λ—ν• ν™κ²½μ—μ„ μ‹μ‘ν•κΈ° μ„ν•΄ ν„μ¬ λ„¤μ„μ¤νμ΄μ¤μ λ¨λ“  λ¦¬μ†μ¤λ¥Ό μ‚­μ ν•©λ‹λ‹¤.

Bash
```
# ν„μ¬ namespaceμ λ¨λ“  λ¦¬μ†μ¤λ¥Ό μ‚­μ ν•©λ‹λ‹¤.
kubectl delete all --all
```

2) Alias (λ‹¨μ¶•ν‚¤) μ„¤μ •  
kubectlμ„ kλ΅ μ¤„μ—¬μ„ μ‚¬μ©ν•λ©΄ ν›¨μ”¬ νΈλ¦¬ν•©λ‹λ‹¤.

Bash
```
alias k='kubectl'
```

## 1λ¶€: νλ“(Pod) μƒμ„± λ° λ‚΄λ¶€ μ΅°μ‘
1) Nginx νλ“ μƒμ„±   
nginx:1.15 λ²„μ „μ„ μ‚¬μ©ν•λ” nginx νλ“λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

Bash
```
k run nginx --image=nginx:1.15
```

2) νλ“ λ‚΄λ¶€ μ ‘μ† λ° νƒμƒ‰   
exec λ…λ Ήμ–΄λ΅ μ‹¤ν–‰ μ¤‘μΈ μ»¨ν…μ΄λ„μ— μ ‘μ†ν•μ—¬ λ¦¬λ…μ¤ λ…λ Ήμ–΄λ“¤μ„ μ‚¬μ©ν•΄ λ΄…λ‹λ‹¤.

Bash
```
# nginx νλ“μ— bash μ…Έλ΅ μ ‘μ†
k exec -it nginx -- bash

# --- (μ΄μ λ¶€ν„°λ” μ»¨ν…μ΄λ„ λ‚΄λ¶€) ---

# μ΄μμ²΄μ  μ •λ³΄ ν™•μΈ
uname -a

# nginx μ„λΉ„μ¤ μƒνƒ ν™•μΈ
service nginx status

# nginx μ„λΉ„μ¤ μ¬μ‹μ‘
service nginx restart

# nginx μ›Ή λ£¨νΈ λ””λ ‰ν† λ¦¬λ΅ μ΄λ™ λ° νμΌ λ©λ΅ ν™•μΈ
cd /usr/share/nginx/html/
ls

# μƒλ΅μ΄ index.html νμΌ μƒμ„±
echo "Welcome our world" > index.html
cat index.html

# μ»¨ν…μ΄λ„μ—μ„ λΉ μ Έλ‚μ¤κΈ°
exit
```

3) Pod IPλ΅ μ§μ ‘ μ ‘μ†ν•μ—¬ ν™•μΈ
νλ“μ— ν• λ‹Ήλ IPλ¥Ό ν™•μΈν•κ³ , curlλ΅ μ ‘μ†ν•μ—¬ λ°©κΈ μμ •ν• index.html λ‚΄μ©μ΄ λ³΄μ΄λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

Bash
```
# 1. nginx νλ“μ IP ν™•μΈ
k get pod nginx -o wide

# 2. ν™•μΈλ IPλ΅ μ ‘μ† ν…μ¤νΈ
curl http://[νλ“μ-IP-μ£Όμ†]
```

## 2λ¶€: port-forwardλ΅ λ‚΄ μ»΄ν“¨ν„°μ— νλ“ μ—°κ²°ν•κΈ°
νλ“ IPλ” ν΄λ¬μ¤ν„° μ™Έλ¶€μ—μ„ μ§μ ‘ μ ‘μ†ν•  μ μ—†μµλ‹λ‹¤. port-forwardλ” λ‚΄ μ»΄ν“¨ν„°μ ν¬νΈμ™€ νλ“μ ν¬νΈλ¥Ό μ„μ‹λ΅ μ—°κ²°ν•μ—¬ κ°λ° λ° ν…μ¤νΈλ¥Ό μ‰½κ² ν•΄μ£Όλ” κΈ°λ¥μ…λ‹λ‹¤.

1) ν¬νΈ ν¬μ›λ”© μ‹¤ν–‰
λ‚΄ μ»΄ν“¨ν„°μ 81λ² ν¬νΈλ΅ λ“¤μ–΄μ¤λ” μ”μ²­μ„ nginx νλ“μ 80λ² ν¬νΈλ΅ μ „λ‹¬ν•©λ‹λ‹¤.

Bash
```
# foregroundλ΅ μ‹¤ν–‰ (μ΄ ν„°λ―Έλ„μ€ μ΄μ  μ‘λ‹µ λ€κΈ° μƒνƒκ°€ λ¨)
k port-forward nginx 81:80
```
μ΄μ  μ›Ή λΈλΌμ°μ €μ—μ„ http://localhost:81 λλ” http://127.0.0.1:81λ΅ μ ‘μ†ν•λ©΄ Nginx νμ΄μ§€κ°€ λ³΄μ…λ‹λ‹¤.

2) μ™Έλ¶€ μ ‘μ† ν—μ© λ° λ°±κ·ΈλΌμ΄λ“ μ‹¤ν–‰
--address 0.0.0.0 μµμ…μ„ μ£Όλ©΄ λ‚΄ μ»΄ν“¨ν„°μ IPλ΅ λ‹¤λ¥Έ PCμ—μ„λ„ μ ‘μ†ν•  μ μμµλ‹λ‹¤. &λ¥Ό λ¶™μ΄λ©΄ λ°±κ·ΈλΌμ΄λ“μ—μ„ μ‹¤ν–‰λ©λ‹λ‹¤.

Bash
```
# λ¨λ“  IPμ—μ„ μ ‘μ† κ°€λ¥ν•λ„λ΅ λ°±κ·ΈλΌμ΄λ“λ΅ μ‹¤ν–‰
kubectl port-forward --address 0.0.0.0 nginx 81:80 &
```
## 3λ¶€: λ””ν”λ΅μ΄λ¨ΌνΈ(Deployment)λ΅ μ• ν”λ¦¬μΌ€μ΄μ… κ΄€λ¦¬

1) λ””ν”λ΅μ΄λ¨ΌνΈ μƒμ„±
3κ°μ λ™μΌν• Nginx νλ“λ¥Ό μ μ§€ν•λ” dep-nginx λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μƒμ„±ν•©λ‹λ‹¤.

Bash
```
kubectl create deployment dep-nginx --image=nginx:1.14 --replicas=3
```

2) μ‹¤ν–‰ μ¤‘μΈ λ””ν”λ΅μ΄λ¨ΌνΈ μμ •
edit λ…λ Ήμ–΄λ΅ μ‹¤ν–‰ μ¤‘μΈ λ¦¬μ†μ¤μ μ„¤μ •μ„ μ§μ ‘ μμ •ν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ replicasλ¥Ό 3μ—μ„ 5λ΅ λ³€κ²½ν•κ³  μ €μ¥ν•λ©΄, νλ“κ°€ μ¦‰μ‹ 5κ°λ΅ λμ–΄λ‚©λ‹λ‹¤.

Bash
```
kubectl edit deploy dep-nginx
```

3) λ””ν”λ΅μ΄λ¨ΌνΈ μ„¤μ •μ„ YAML νμΌλ΅ μ €μ¥
μ‹¤ν–‰ μ¤‘μΈ λ¦¬μ†μ¤μ μ„¤μ •μ„ YAML νμΌλ΅ μ €μ¥ν•μ—¬ μ½”λ“λ΅ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.

Bash
```
kubectl get deploy dep-nginx -o yaml > dep-nginx.yml
```

4) YAML νμΌ μμ • λ° μ¬λ°°ν¬
λ‹¤μ΄λ°›μ€ YAML νμΌμ„ μ§μ ‘ μμ •ν• λ’¤, κΈ°μ΅΄ λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μ‚­μ ν•κ³  νμΌλ΅λ¶€ν„° λ‹¤μ‹ μƒμ„±ν•  μ μμµλ‹λ‹¤. μ΄κ²ƒμ΄ μΏ λ²„λ„¤ν‹°μ¤λ¥Ό κ΄€λ¦¬ν•λ” κ°€μ¥ ν‘μ¤€μ μΈ λ°©λ²•μ…λ‹λ‹¤.

Bash
```
# 1. κΈ°μ΅΄ λ””ν”λ΅μ΄λ¨ΌνΈ μ‚­μ 
kubectl delete deployment dep-nginx

# 2. (vi νΈμ§‘κΈ° λ“±μΌλ΅ dep-nginx.yml νμΌ μμ •)
vi dep-nginx.yml

# 3. μμ •λ YAML νμΌλ΅ λ‹¤μ‹ μƒμ„±
kubectl create -f dep-nginx.yml
```

----------------------------------------------------------------

# π“ μΏ λ²„λ„¤ν‹°μ¤ νλ“(Pod) μƒμ„± λ° λ μ΄λΈ” κ΄€λ¦¬ μ›ν¬ν”λ΅μ°   
## 0. μ¤€λΉ„: μ‹¤μµ ν™κ²½ μ •λ¦¬ λ° λ‹¨μ¶•ν‚¤ μ„¤μ •   

1) λ¨λ“  λ¦¬μ†μ¤ μ •λ¦¬ (μ‹¤μµ μ‹μ‘ μ „)   
κΉ¨λ—ν• ν™κ²½μ—μ„ μ‹μ‘ν•κΈ° μ„ν•΄ ν„μ¬ λ„¤μ„μ¤νμ΄μ¤μ λ¨λ“  νλ“μ™€ λ””ν”λ΅μ΄λ¨ΌνΈλ¥Ό μ‚­μ ν•©λ‹λ‹¤.

Bash
```
kubectl delete pods,deployments --all
```

2) Alias (λ‹¨μ¶•ν‚¤) μ„¤μ •
kubectlμ„ kλ΅ μ¤„μ—¬μ„ μ‚¬μ©ν•λ©΄ ν›¨μ”¬ νΈλ¦¬ν•©λ‹λ‹¤.

Bash
```
alias k='kubectl'
```

## 1λ¶€: YAML νμΌλ΅ νλ“ μƒμ„±ν•κΈ° (Best Practice)  
λ…λ Ήμ–΄λ΅ νλ“λ¥Ό λ§λ“λ” κ²ƒλ„ κ°€λ¥ν•μ§€λ§, μ‹¤μ  μ΄μ ν™κ²½μ—μ„λ” μ„¤μ •μ„ νμΌλ΅ κ΄€λ¦¬ν•λ” κ²ƒμ΄ ν‘μ¤€μ…λ‹λ‹¤. run λ…λ Ήμ–΄μ™€ --dry-run μµμ…μ„ μ‚¬μ©ν•λ©΄ YAML νμΌμ μ΄μ•μ„ μ‰½κ² λ§λ“¤ μ μμµλ‹λ‹¤.

1) νλ“ μ„¤μ •(YAML) νμΌ μƒμ„±ν•κΈ°  
--dry-run=client -o yaml μµμ…μ€ νλ“λ¥Ό μ‹¤μ λ΅ μƒμ„±ν•μ§€ μ•κ³ , μƒμ„±μ— ν•„μ”ν• YAML λ‚΄μ©μ„ ν™”λ©΄μ— μ¶λ ¥ν•΄ μ¤λ‹λ‹¤. μ΄ κ²°κ³Όλ¥Ό νμΌλ΅ μ €μ¥ν•©λ‹λ‹¤.

Bash
```
k run web1 --image=nginx:1.14 --port=80 --dry-run=client -o yaml > web1.yml
```

2) YAML νμΌ μμ • λ° μ μ©  
μ €μ¥λ web1.yml νμΌμ„ μ—΄μ–΄ μ›ν•λ” λ€λ΅ μμ •ν• λ’¤, apply λ…λ Ήμ–΄λ΅ ν΄λ¬μ¤ν„°μ— μ μ©ν•©λ‹λ‹¤.

Bash
```
# 1. vi νΈμ§‘κΈ°λ΅ νμΌμ„ μ—΄μ–΄ metadata.nameκ³Ό spec.containers[0].nameμ„ 'web2'λ΅ μμ •ν•©λ‹λ‹¤.
vi web1.yml

# 2. μμ •λ νμΌλ΅ web2 νλ“λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
k apply -f web1.yml
```

3) μƒμ„±λ νλ“ ν™•μΈ λ° μ‚­μ 
νλ“κ°€ μ μƒμ„±λμ—λ”μ§€ ν™•μΈν•κ³ , λ‹¤μ μ‹¤μµμ„ μ„ν•΄ μ‚­μ ν•©λ‹λ‹¤.

Bash
```
k get pods
k delete pod web2
```

## 2λ¶€: Here DocumentμΌλ΅ νλ“ μ¦‰μ‹ μƒμ„±ν•κΈ°
μ¤ν¬λ¦½νΈλ¥Ό μ‘μ„±ν•κ±°λ‚ μ„μ‹λ΅ νλ“λ¥Ό μƒμ„±ν•  λ•, νμΌμ„ λ§λ“¤μ§€ μ•κ³  ν„°λ―Έλ„μ—μ„ λ°”λ΅ YAML λ‚΄μ©μ„ μ „λ‹¬ν•μ—¬ νλ“λ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤.

Bash
```
cat <<EOF | k apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: myweb
  labels:
    environment: production
    app: nginx
spec:
  containers:
  - image: nginx:latest
    name: myweb
    ports:
    - containerPort: 80
      protocol: TCP
EOF
```
cat <<EOF | ...λ” EOFλΌλ” λ¬Έμλ¥Ό λ§λ‚κΈ° μ „κΉμ§€μ λ¨λ“  λ‚΄μ©μ„ kubectl apply -f - λ…λ Ήμ–΄μ μ…λ ¥μΌλ΅ μ „λ‹¬ν•λΌλ” μλ―Έμ…λ‹λ‹¤.

## 3λ¶€: λ μ΄λΈ”(Label)λ΅ νλ“ κ΄€λ¦¬ν•κΈ° (μΏ λ²„λ„¤ν‹°μ¤μ ν•µμ‹¬)

λ μ΄λΈ”μ€ λ¦¬μ†μ¤λ¥Ό μ‹λ³„ν•κ³  κ·Έλ£Ήν™”ν•λ” λ° μ‚¬μ©λλ” ν•µμ‹¬ κΈ°λ¥μ…λ‹λ‹¤. μμ‹­, μλ°± κ°μ νλ“λ¥Ό ν¨μ¨μ μΌλ΅ κ΄€λ¦¬ν•  μ μκ² ν•΄μ¤λ‹λ‹¤.

1) λ¨λ“  νλ“μ™€ λ μ΄λΈ” ν™•μΈν•κΈ°
--show-labels μµμ…μΌλ΅ ν„μ¬ μ‹¤ν–‰ μ¤‘μΈ λ¨λ“  νλ“μ™€ κ° νλ“μ— λ¶™μ–΄μλ” λ μ΄λΈ”μ„ ν™•μΈν•©λ‹λ‹¤.

Bash
```
k get pods --show-labels
```
2) λ μ΄λΈ”λ΅ μ›ν•λ” νλ“λ§ μ„ νƒν•μ—¬ μ΅°νν•κΈ°
-l μµμ…μ„ μ‚¬μ©ν•μ—¬ νΉμ • λ μ΄λΈ”μ΄ λ¶™μ€ νλ“λ§ κ³¨λΌμ„ λ³Ό μ μμµλ‹λ‹¤.

Bash
```
# environment=production λ μ΄λΈ”μ΄ λ¶™μ€ νλ“λ§ μ΅°ν
k get pod -l environment=production
```

3) μ‹¤ν–‰ μ¤‘μΈ νλ“μ— λ μ΄λΈ” μ κ±°ν•κΈ°
label λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ μ‹¤ν–‰ μ¤‘μΈ νλ“μ λ μ΄λΈ”μ„ λ™μ μΌλ΅ μ¶”κ°€ν•κ±°λ‚ μ κ±°ν•  μ μμµλ‹λ‹¤.

Bash
```
# myweb νλ“μ—μ„ 'environment' λ μ΄λΈ”μ„ μ κ±°ν•©λ‹λ‹¤. (λ μ΄λΈ” μ΄λ¦„ λ’¤μ— '-'λ¥Ό λ¶™μ…λ‹λ‹¤)
k label pods myweb environment-

# λ μ΄λΈ”μ΄ μ κ±°λμ—λ”μ§€ λ‹¤μ‹ ν™•μΈν•©λ‹λ‹¤.
k get pods --show-labels
```

4) νλ“ λ‚΄λ¶€ ν™κ²½λ³€μ ν™•μΈν•κΈ°
μΏ λ²„λ„¤ν‹°μ¤λ” νλ“μ— λ€ν• μ μ©ν• μ •λ³΄λ“¤μ„ μ»¨ν…μ΄λ„μ ν™κ²½λ³€μλ΅ μλ™μΌλ΅ μ£Όμ…ν•©λ‹λ‹¤.

Bash
```
k exec myweb -- env
```

## 4. μµμΆ… μ •λ¦¬
μ‹¤μµμ΄ λλ‚¬μΌλ©΄ μ•„λ λ…λ Ήμ–΄λ΅ μƒμ„±ν–λ λ¨λ“  λ¦¬μ†μ¤λ¥Ό λ‹¤μ‹ ν•λ² κΉ¨λ—ν•κ² μ‚­μ ν•©λ‹λ‹¤.

Bash
```
kubectl delete pods,deployments --all
```